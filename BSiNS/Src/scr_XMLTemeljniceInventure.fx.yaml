"scr_XMLTemeljniceInventure As screen.'autoLayout_HeaderFooter_ver1.0'":
    Fill: =RGBA(234, 83, 109, 1)
    LoadingSpinnerColor: =App.Theme.Colors.Primary
    OnHidden: =
    OnVisible: |
        =Set(
            isLoading,
            true
        );
        If(
            !IsBlank(SelectedFile),
            IfError(
                UpdateContext(
                    {
                        xmlData: (ParseJSON(
                            GetXml.Run(
                                SelectedFile,
                                SelectedQueue
                            ).response
                        ).Lines )
                    }
                ),
                Notify(
                    "Greška u obradi.",
                    NotificationType.Error,
                    2000
                )
            )
        );
        ClearCollect(
            colLines,
            IfError(
                ForAll(
                    xmlData.Item_Journal_Line As line,
                    {
                        Journal_Template_Name: Text(line.Journal_Template_Name),
                        Journal_Batch_Name: Text(line.Journal_Batch_Name),
                        'Line_No.': Text(line.'Line_No.'),
                        'Document_No.': Text(line.'Document_No.'),
                        Description: Text(line.Description),
                        Source_Type: Text(line.Source_Type),
                        'Source_No.': Text(line.'Source_No.'),
                        Source_Code: Text(line.Source_Code),
                        'Item_No.': Text(line.'Item_No.'),
                        'Phys._Inventory': Text(line.'Phys._Inventory'),
                        Location_Code: Text(line.Location_Code),
                        Posting_Date: Text(line.Posting_Date),
                        Document_Date: Text(line.Document_Date),
                        Sales_Price: Text(line.Sales_Price),
                        Qty_Calculated: Text(line.Qty_Calculated),
                        Qty_Calculated_Ext: Text(line.Qty_Calculated_Ext),
                        Quantity: Text(line.Quantity),
                        Entry_Type: Text(line.Entry_Type),
                        Qty_Phys_Inventory: Text(line.Qty_Phys_Inventory),
                        Qty_Phys_Inventory_Ext: Text(line.Qty_Phys_Inventory_Ext),
                        Gen_Bus_Posting_Group: Text(line.Gen_Bus_Posting_Group),
                        Lot_No: Text(line.Lot_No),
                        Item_Expiration_Date: Text(line.Item_Expiration_Date),
                        Barcode: Text(line.Barcode)
                    }
                ),
                {
                    Journal_Template_Name: Text(xmlData.Item_Journal_Line.Journal_Template_Name),
                    Journal_Batch_Name: Text(xmlData.Item_Journal_Line.Journal_Batch_Name),
                    'Line_No.': Text(xmlData.Item_Journal_Line.'Line_No.'),
                    'Document_No.': Text(xmlData.Item_Journal_Line.'Document_No.'),
                    Description: Text(xmlData.Item_Journal_Line.Description),
                    Source_Type: Text(xmlData.Item_Journal_Line.Source_Type),
                    'Source_No.': Text(xmlData.Item_Journal_Line.'Source_No.'),
                    Source_Code: Text(xmlData.Item_Journal_Line.Source_Code),
                    'Item_No.': Text(xmlData.Item_Journal_Line.'Item_No.'),
                    'Phys._Inventory': Text(xmlData.Item_Journal_Line.'Phys._Inventory'),
                    Location_Code: Text(xmlData.Item_Journal_Line.Location_Code),
                    Posting_Date: Text(xmlData.Item_Journal_Line.Posting_Date),
                    Document_Date: Text(xmlData.Item_Journal_Line.Document_Date),
                    Sales_Price: Text(xmlData.Item_Journal_Line.Sales_Price),
                    Qty_Calculated: Text(xmlData.Item_Journal_Line.Qty_Calculated),
                    Qty_Calculated_Ext: Text(xmlData.Item_Journal_Line.Qty_Calculated_Ext),
                    Quantity: Text(xmlData.Item_Journal_Line.Quantity),
                    Entry_Type: Text(xmlData.Item_Journal_Line.Entry_Type),
                    Qty_Phys_Inventory: Text(xmlData.Item_Journal_Line.Qty_Phys_Inventory),
                    Qty_Phys_Inventory_Ext: Text(xmlData.Item_Journal_Line.Qty_Phys_Inventory_Ext),
                    Gen_Bus_Posting_Group: Text(xmlData.Item_Journal_Line.Gen_Bus_Posting_Group),
                    Lot_No: Text(xmlData.Item_Journal_Line.Lot_No),
                    Item_Expiration_Date: Text(xmlData.Item_Journal_Line.Item_Expiration_Date),
                    Barcode: Text(xmlData.Item_Journal_Line.Barcode)
                }
            )
        );
        If(
            SelectedQueue = ReadyForProcessing,
            ChangeXmlStatus.Run(
                SelectedFile,
                SelectedQueue,
                InProgress
            );
            Set(
                SelectedQueue,
                InProgress
            )
        );
        If(
            IsEmpty(
                Filter(
                    lockedItems,
                    ThisRecord.documentId = SelectedDocumentName
                )
            ),
            Collect(
                lockedItems,
                ForAll(
                    colLines As line,
                    {
                        documentId: SelectedDocumentName,
                        lineId: line.'Line_No.',
                        isLocked: false
                    }
                )
            )
        );
        Set(
            isLoading,
            false
        );

    vrt_Inv As groupContainer.verticalAutoLayoutContainer:
        DropShadow: =DropShadow.Light
        Fill: =RGBA(245, 245, 245, 1)
        Height: =Parent.Height
        LayoutAlignItems: =LayoutAlignItems.Stretch
        LayoutDirection: =LayoutDirection.Vertical
        LayoutMode: =LayoutMode.Auto
        RadiusBottomLeft: =4
        RadiusBottomRight: =4
        RadiusTopLeft: =4
        RadiusTopRight: =4
        Width: =Parent.Width
        ZIndex: =2

        com_InvHeader As com_Header:
            LayoutMinHeight: =640
            LayoutMinWidth: =App.Width
            Title: ="TEMELJNICE INVENTURE"

        con_InvBody As groupContainer.verticalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            LayoutAlignItems: =LayoutAlignItems.Stretch
            LayoutDirection: =LayoutDirection.Vertical
            LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
            LayoutMinHeight: =100
            LayoutMinWidth: =App.Width
            LayoutMode: =LayoutMode.Auto
            PaddingBottom: =10
            PaddingLeft: =10
            PaddingRight: =10
            Visible: =!isLoading
            Width: =Max(App.Width, App.MinScreenWidth)
            ZIndex: =2

            com_InvGalleries As com_Galleries:
                AddNew: =true
                FillPortions: =1
                LayoutMinHeight: =200
                LayoutMinWidth: =350
                LineLabels: |-
                    ={Line1: "Broj artikla:", Line2: "Naziv artikla:", Line3: "LOT", Line4: "Rok trajanja:", Line5: "Količina:"}
                LineValueVisibility: |-
                    ={Line_No: true, Item_No: false, Posting_Group: false, Inv_Posting_Group: true, Description: true, Quantity: false, Unit_Of_Measure: false, 'Qty-to_Ship': false, LotNo: true, Exp_Date: true, QtyInv: true}
                VisibleResEntryList: =false

        spn_ProLoader_1 As Spinner:
            BasePaletteColor: =
            DisplayMode: =DisplayMode.Edit
            FillPortions: =1
            FontColor: =
            Height: =200
            Label: ="Učitavam dokument..."
            LabelPosition: ='Spinner.LabelPosition'.Below
            LayoutMinHeight: =200
            LayoutMinWidth: =350
            SpinnerSize: ='Spinner.SpinnerSize'.Huge
            Visible: =isLoading
            Width: =200
            X: =0
            Y: =0
            ZIndex: =3

        com_InvFooter As com_Footer:
            ErrorBaseOnModalExists: =com_InvModal.ErrorExist
            IsInventura: =true
            JSONData: |-
                ="{" & Char(34) & "Lines" & Char(34) & ": " & "{" & Char(34) & "Item_Journal_Line" & Char(34) & ":" & JSON(colLines) & "}" & "}"
            LayoutMinHeight: =640
            LayoutMinWidth: =640
            ZIndex: =4

    com_InvModal As com_Modal:
        IsInventura: =true
        LineId: =com_InvGalleries.SelectedLine.'Line_No.'
        LotNo: =com_InvGalleries.SelectedLine.Lot_No
        LotNoPropVisible: =!(CountIf(lockedItems, lineId = com_InvGalleries.SelectedLine.'Line_No.') > 0)//!LotNoPropVisibleCheck
        Qty_Phys_Inventory: =com_InvGalleries.SelectedLine.Qty_Phys_Inventory
        Quantity: =com_InvGalleries.SelectedLine.Quantity
        ResEntryId: =
        Visible: =isModalOpen
        ZIndex: =3

