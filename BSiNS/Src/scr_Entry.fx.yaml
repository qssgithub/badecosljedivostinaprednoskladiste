"scr_Entry As screen.'autoLayout_Sidebar_ver1.0'":
    Fill: =RGBA(45, 128, 40, 1)
    LoadingSpinnerColor: =App.Theme.Colors.Primary
    OnHidden: =
    OnVisible: |
        =Set(
            isLoading,
            true
        );
        Set(
            SelectedFile,
            Blank()
        );
        Set(
            SelectedFolder,
            Blank()
        );
        Set(
            isModalOpen,
            false
        );
        UpdateContext({Files: ParseJSON(GetAll.Run().outputfiles)});
        UpdateContext(
            {
                XMLFiles: Table(
                    ForAll(
                        Files.ReadyForProcessing As file,
                        {
                            FileName: Text(file.Name),
                            FileType: Text(
                                First(
                                    LastN(
                                        Split(
                                            file.Name,
                                            "_"
                                        ),
                                        2
                                    )
                                ).Value
                            ),
                            FolderName: "ReadyForProcessing"
                        }
                    ),
                    ForAll(
                        Files.InProgress As file,
                        {
                            FileName: file.Name,
                            FileType: Text(
                                First(
                                    LastN(
                                        Split(
                                            file.Name,
                                            "_"
                                        ),
                                        2
                                    )
                                ).Value
                            ),
                            FolderName: "InProgress"
                        }
                    )
                )
            }
        );
        UpdateContext({filteredFiles: XMLFiles});
        If(
            Not(dd_EntryStatus.Selected.Id = "All"),
            UpdateContext(
                {
                    filteredFiles: Filter(
                        filteredFiles,
                        dd_EntryStatus.Selected.Id = ThisRecord.FolderName
                    )
                }
            )
        );
        If(
            Not(dd_EntryFileType.Selected.Id = "0"),
            UpdateContext(
                {
                    filteredFiles: Filter(
                        filteredFiles,
                        dd_EntryFileType.Selected.Id = ThisRecord.FileType
                    )
                }
            )
        );
        Set(
            isLoading,
            false
        );

    vrt_Entry As groupContainer.verticalAutoLayoutContainer:
        DropShadow: =DropShadow.Light
        Fill: =RGBA(245, 245, 245, 1)
        Height: =Parent.Height
        LayoutAlignItems: =LayoutAlignItems.Stretch
        LayoutDirection: =LayoutDirection.Vertical
        LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
        LayoutMode: =LayoutMode.Auto
        RadiusBottomLeft: =4
        RadiusBottomRight: =4
        RadiusTopLeft: =4
        RadiusTopRight: =4
        Width: =Parent.Width
        ZIndex: =1

        com_EntryHeader As com_Header:
            BackToScreen: =
            ChildTabPriority: =
            Height: =75
            IsMobile: =isMobile
            LayoutMinHeight: =75
            LayoutMinWidth: =200
            Title: ="BADECO SLJEDIVOST I NAPREDNO SKLADIŠTE"

        vrt_EntryBody As groupContainer.verticalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            DropShadow: =DropShadow.Light
            Height: =Parent.Height
            LayoutAlignItems: =LayoutAlignItems.Stretch
            LayoutDirection: =LayoutDirection.Vertical
            LayoutGap: =15
            LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            PaddingBottom: =10
            PaddingLeft: =10
            PaddingRight: =10
            PaddingTop: =10
            RadiusBottomLeft: =4
            RadiusBottomRight: =4
            RadiusTopLeft: =4
            RadiusTopRight: =4
            Width: =Parent.Width
            ZIndex: =3

            hrz_EntryDropdown As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                FillPortions: =0
                Height: =If(isMobile, 240, 80)
                LayoutAlignItems: =LayoutAlignItems.Stretch
                LayoutDirection: =If(isMobile, LayoutDirection.Vertical, LayoutDirection.Horizontal)
                LayoutGap: =10
                LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                LayoutMinHeight: =80
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                RadiusBottomLeft: =4
                RadiusBottomRight: =4
                RadiusTopLeft: =4
                RadiusTopRight: =4
                Width: =Parent.Width
                ZIndex: =1

                vrt_EntryStatus As groupContainer.horizontalAutoLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    Height: =Parent.Height
                    LayoutAlignItems: =LayoutAlignItems.Stretch
                    LayoutDirection: =LayoutDirection.Vertical
                    LayoutGap: =5
                    LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                    LayoutMinHeight: =50
                    LayoutMinWidth: =50
                    LayoutMode: =LayoutMode.Auto
                    PaddingBottom: =2
                    PaddingLeft: =2
                    PaddingRight: =2
                    PaddingTop: =2
                    RadiusBottomLeft: =4
                    RadiusBottomRight: =4
                    RadiusTopLeft: =4
                    RadiusTopRight: =4
                    ZIndex: =1

                    txt_EntryStatus As Text:
                        AutoHeight: =true
                        DisplayMode: =DisplayMode.Edit
                        Height: =32
                        LayoutMinHeight: =32
                        LayoutMinWidth: =96
                        Text: ="Status dokumenta"
                        Width: =14
                        X: =0
                        Y: =0
                        ZIndex: =1

                    con_EntryStatus As groupContainer.manualLayoutContainer:
                        AlignInContainer: =AlignInContainer.SetByContainer
                        DropShadow: =DropShadow.Light
                        LayoutMinHeight: =50
                        LayoutMinWidth: =50
                        RadiusBottomLeft: =4
                        RadiusBottomRight: =4
                        RadiusTopLeft: =4
                        RadiusTopRight: =4
                        ZIndex: =3

                        dd_EntryStatus As Dropdown.pcfdataset:
                            DefaultSelectedItems: |-
                                ={Id: "All", Text: "Svi statusi"}
                            DisplayMode: =DisplayMode.Edit
                            Height: =Parent.Height
                            Items: |-
                                =[
                                    {
                                        Id: "All",
                                        Text: "Svi statusi"
                                    },
                                    {
                                        Id: "ReadyForProcessing",
                                        Text: "Za obradu"
                                    },
                                    {
                                        Id: "InProgress",
                                        Text: "U obradi"
                                    }
                                ]
                            OnChange: |-
                                =If(
                                    Not(dd_EntryStatus.Selected.Id = "All"),
                                    UpdateContext(
                                        {
                                            filteredFiles: Filter(
                                                XMLFiles,
                                                dd_EntryStatus.Selected.Id = ThisRecord.FolderName
                                            )
                                        }
                                    ),
                                    UpdateContext({filteredFiles: XMLFiles})
                                );
                                If(
                                    Not(dd_EntryFileType.Selected.Id = "0"),
                                    UpdateContext(
                                        {
                                            filteredFiles: Filter(
                                                filteredFiles,
                                                dd_EntryFileType.Selected.Id = ThisRecord.FileType
                                            )
                                        }
                                    )
                                );
                            Width: =Parent.Width
                            X: =0
                            Y: =0
                            ZIndex: =2

                            inp_EntryStatus As PowerApps_CoreControls_DropdownCanvasTemplate_dataField.textualColumn:
                                FieldDisplayName: ="Text"
                                FieldName: ="Text"
                                FieldType: ="s"
                                FieldVariantName: ="textualColumn"
                                Height: =100
                                Order: =1
                                Width: =100
                                X: =0
                                Y: =0
                                ZIndex: =14

                            id_EntryStatus As PowerApps_CoreControls_DropdownCanvasTemplate_dataField.textualColumn:
                                FieldDisplayName: ="Id"
                                FieldName: ="Id"
                                FieldType: ="s"
                                FieldVariantName: ="textualColumn"
                                Height: =100
                                Order: =2
                                Width: =100
                                X: =0
                                Y: =0
                                ZIndex: =16

                vrt_EntryFileType As groupContainer.verticalAutoLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    Height: =Parent.Height
                    LayoutAlignItems: =LayoutAlignItems.Stretch
                    LayoutDirection: =LayoutDirection.Vertical
                    LayoutGap: =5
                    LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                    LayoutMinHeight: |
                        =50
                    LayoutMinWidth: =50
                    LayoutMode: =LayoutMode.Auto
                    PaddingBottom: =2
                    PaddingLeft: =2
                    PaddingRight: =2
                    PaddingTop: =2
                    RadiusBottomLeft: =4
                    RadiusBottomRight: =4
                    RadiusTopLeft: =4
                    RadiusTopRight: =4
                    ZIndex: =2

                    txt_EntryFileType As Text:
                        AutoHeight: =true
                        DisplayMode: =DisplayMode.Edit
                        Height: =32
                        LayoutMinHeight: =32
                        LayoutMinWidth: =96
                        Text: ="Tip dokumenta"
                        Width: =96
                        X: =0
                        Y: =0
                        ZIndex: =1

                    con_EntryFileType As groupContainer.manualLayoutContainer:
                        AlignInContainer: =AlignInContainer.SetByContainer
                        DropShadow: =DropShadow.Light
                        Height: =Parent.Height
                        LayoutMinHeight: =50
                        LayoutMinWidth: =50
                        RadiusBottomLeft: =4
                        RadiusBottomRight: =4
                        RadiusTopLeft: =4
                        RadiusTopRight: =4
                        Width: =Parent.Width
                        ZIndex: =3

                        dd_EntryFileType As Dropdown.pcfdataset:
                            DefaultSelectedItems: |-
                                ={
                                    Id: "0",
                                    Text: "Svi tipovi"
                                }
                            DisplayMode: =DisplayMode.Edit
                            Height: =Parent.Height
                            Items: |-
                                =[
                                    {
                                        Id: "0",
                                        Text: "Svi tipovi"
                                    },
                                    {
                                        Id: "01",
                                        Text: "Temeljnice inventure"
                                    },
                                    {
                                        Id: "02",
                                        Text: "Nabavni nalozi"
                                    },
                                    {
                                        Id: "03",
                                        Text: "Prodajni nalozi"
                                    },
                                    {
                                        Id: "04",
                                        Text: "Nalozi za prenos"
                                    },
                                    {
                                        Id: "05",
                                        Text: "Skladišne primke"
                                    },
                                    {
                                        Id: "06",
                                        Text: "Skladišne otpremnice"
                                    },
                                    {
                                        Id: "07",
                                        Text: "Put-Away Request"
                                    },
                                    {
                                        Id: "08",
                                        Text: "Pick Request"
                                    }
                                ]
                            OnChange: |
                                =If(
                                    Not(dd_EntryFileType.Selected.Id = "0"),
                                    UpdateContext(
                                        {
                                            filteredFiles: Filter(
                                                XMLFiles,
                                                dd_EntryFileType.Selected.Id = ThisRecord.FileType
                                            )
                                        }
                                    ),
                                    UpdateContext({filteredFiles: XMLFiles})
                                );
                                If(
                                    Not(dd_EntryStatus.Selected.Id = "All"),
                                    UpdateContext(
                                        {
                                            filteredFiles: Filter(
                                                filteredFiles,
                                                dd_EntryStatus.Selected.Id = ThisRecord.FolderName
                                            )
                                        }
                                    )
                                );
                            Width: =Parent.Width
                            X: =0
                            Y: =0
                            ZIndex: =2

                            inp_EntryFileType As PowerApps_CoreControls_DropdownCanvasTemplate_dataField.textualColumn:
                                FieldDisplayName: ="Text"
                                FieldName: ="Text"
                                FieldType: ="s"
                                FieldVariantName: ="textualColumn"
                                Height: =100
                                Order: =1
                                Width: =100
                                X: =0
                                Y: =0
                                ZIndex: =15

                            id_EntryFileType As PowerApps_CoreControls_DropdownCanvasTemplate_dataField.textualColumn:
                                FieldDisplayName: ="Id"
                                FieldName: ="Id"
                                FieldType: ="s"
                                FieldVariantName: ="textualColumn"
                                Height: =100
                                Order: =2
                                Width: =100
                                X: =0
                                Y: =0
                                ZIndex: =17

                btn_EntryReload As Button:
                    Align: =Align.Center
                    AlignInContainer: =AlignInContainer.End
                    Appearance: ='ButtonCanvas.Appearance'.Transparent
                    DisplayMode: =If(isLoading, DisplayMode.Disabled, DisplayMode.Edit)
                    FontSize: =40
                    Height: =dd_EntryFileType.Height
                    Icon: ="ArrowClockwise"
                    IconStyle: ='ButtonCanvas.IconStyle'.Filled
                    Layout: ='ButtonCanvas.Layout'.IconOnly
                    LayoutMinHeight: =32
                    LayoutMinWidth: =96
                    OnSelect: |
                        =Set(
                            isLoading,
                            true
                        );
                        UpdateContext({Files: ParseJSON(GetAll.Run().outputfiles)});
                        UpdateContext(
                            {
                                XMLFiles: Table(
                                    ForAll(
                                        Files.ReadyForProcessing As file,
                                        {
                                            FileName: Text(file.Name),
                                            FileType: Text(
                                                First(
                                                    LastN(
                                                        Split(
                                                            file.Name,
                                                            "_"
                                                        ),
                                                        2
                                                    )
                                                ).Value
                                            ),
                                            FolderName: "ReadyForProcessing"
                                        }
                                    ),
                                    ForAll(
                                        Files.InProgress As file,
                                        {
                                            FileName: file.Name,
                                            FileType: Text(
                                                First(
                                                    LastN(
                                                        Split(
                                                            file.Name,
                                                            "_"
                                                        ),
                                                        2
                                                    )
                                                ).Value
                                            ),
                                            FolderName: "InProgress"
                                        }
                                    )
                                )
                            }
                        );
                        UpdateContext({filteredFiles: XMLFiles});
                        If(
                            Not(dd_EntryStatus.Selected.Id = "All"),
                            UpdateContext(
                                {
                                    filteredFiles: Filter(
                                        filteredFiles,
                                        dd_EntryStatus.Selected.Id = ThisRecord.FolderName
                                    )
                                }
                            )
                        );
                        If(
                            Not(dd_EntryFileType.Selected.Id = "0"),
                            UpdateContext(
                                {
                                    filteredFiles: Filter(
                                        filteredFiles,
                                        dd_EntryFileType.Selected.Id = ThisRecord.FileType
                                    )
                                }
                            )
                        );
                        Set(
                            isLoading,
                            false
                        );
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Text: ="Osvježi"
                    Width: =32
                    X: =0
                    Y: =0
                    ZIndex: =4

            con_EntryData As groupContainer.manualLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                DropShadow: =DropShadow.Light
                LayoutMinHeight: =100
                LayoutMinWidth: =100
                RadiusBottomLeft: =4
                RadiusBottomRight: =4
                RadiusTopLeft: =4
                RadiusTopRight: =4
                ZIndex: =4

                "glr_EntryXMLFiles As gallery.'BrowseLayout_Vertical_OneTextVariant_ver5.0'":
                    BorderColor: =App.Theme.Colors.Darker40
                    DelayItemLoading: =true
                    Height: =Parent.Height
                    Items: =filteredFiles
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    OnSelect: |
                        =Switch(
                            Parent.Selected.FileType,
                            "01",
                            Navigate(
                                scr_XMLTemeljniceInventure,
                                ScreenTransition.Fade
                            ),
                            "02",
                            Navigate(
                                scr_XMLNabavniNalog,
                                ScreenTransition.Fade
                            ),
                            "03",
                            Navigate(
                                scr_XMLNalogZaProdaju,
                                ScreenTransition.Fade
                            ),
                            "04",
                            Navigate(
                                scr_XMLNalogZaPrenos,
                                ScreenTransition.Fade
                            ),
                            "05",
                            Navigate(
                                scr_XMLPrimke,
                                ScreenTransition.Fade
                            ),
                            "06",
                            Navigate(
                                scr_XMLOtpremnice,
                                ScreenTransition.Fade
                            )
                        );
                        Set(
                            SelectedFile,
                            Substitute(
                                ThisItem.FileName,
                                ".xml",
                                ""
                            )
                        );
                        Set(
                            SelectedFolder,
                            ThisItem.FolderName
                        );
                        Set(
                            SelectedDocumentName,
                            First(
                                Split(
                                    Last(
                                        Split(
                                            ThisItem.FileName,
                                            "_"
                                        )
                                    ).Value,
                                    "."
                                )
                            ).Value
                        );
                    TemplatePadding: =0
                    TemplateSize: =80
                    Visible: =!isLoading && !IsEmpty(filteredFiles)
                    Width: =Parent.Width
                    ZIndex: =1

                    lbl_EntryFileName As label:
                        Color: =RGBA(50, 49, 48, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =Self.Size * 5
                        OnSelect: |
                            =Select(Parent);
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Text: =First(Split(Last(Split(ThisItem.FileName, "_")).Value, ".")).Value
                        Width: =Parent.TemplateWidth - 86
                        X: =16
                        Y: =(Parent.TemplateHeight / 2) - (Self.Height / 2)
                        ZIndex: =1

                    icn_EntryNext As icon.ChevronRight:
                        AccessibleLabel: =Self.Tooltip
                        BorderColor: =App.Theme.Colors.Darker40
                        Color: =RGBA(166, 166, 166, 1)
                        DisabledBorderColor: =RGBA(166, 166, 166, 1)
                        DisabledColor: =RGBA(244, 244, 244, 1)
                        Height: =50
                        Icon: =Icon.ChevronRight
                        OnSelect: |
                            =Select(Parent);
                        PaddingBottom: =12
                        PaddingLeft: =12
                        PaddingRight: =12
                        PaddingTop: =12
                        Tooltip: ="View item details"
                        Width: =50
                        X: =Parent.TemplateWidth - Self.Width - 12
                        Y: =(Parent.TemplateHeight / 2) - (Self.Height / 2)
                        ZIndex: =2

                    rct_EntrySeparator As rectangle:
                        BorderColor: =App.Theme.Colors.Darker40
                        Fill: =RGBA(255, 255, 255, 1)
                        Height: =8
                        OnSelect: =Select(Parent)
                        Width: =Parent.TemplateWidth
                        Y: =Parent.TemplateHeight - Self.Height
                        ZIndex: =3

                    rct_Entry As rectangle:
                        BorderColor: =App.Theme.Colors.Darker40
                        Fill: =App.Theme.Colors.Darker30
                        Height: =Parent.TemplateHeight - rct_EntrySeparator.Height
                        OnSelect: =Select(Parent)
                        Visible: =ThisItem.IsSelected
                        Width: =4
                        ZIndex: =4

                spn_EntryLoader As Spinner:
                    Appearance: ='Spinner.Appearance'.Primary
                    BasePaletteColor: =RGBA(249, 83, 109, 1)
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =Parent.Height
                    Label: ="Učitavam dokumente..."
                    LabelPosition: ='Spinner.LabelPosition'.Below
                    SpinnerSize: ='Spinner.SpinnerSize'.Huge
                    Visible: =isLoading
                    Width: =Parent.Width
                    X: =0
                    Y: =0
                    ZIndex: =2

                txt_EntryNoData As Text:
                    Align: ='TextCanvas.Align'.Center
                    AutoHeight: =false
                    DisplayMode: =DisplayMode.Edit
                    Height: =Parent.Height
                    Size: =20
                    Text: ="Nema dokumenata..."
                    VerticalAlign: ='TextCanvas.VerticalAlign'.Top
                    Visible: =!isLoading && IsEmpty(filteredFiles)
                    Width: =Parent.Width
                    X: =0
                    Y: =0
                    ZIndex: =3

