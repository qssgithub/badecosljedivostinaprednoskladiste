"scr_XMLNabavniNalog As screen.'autoLayout_HeaderFooter_ver1.0'":
    Fill: =RGBA(234, 83, 109, 1)
    LoadingSpinnerColor: =RGBA(164, 38, 44, 1)
    OnVisible: |-
        =Reset(nabavniNalogReadyForNavCheckbox);
        If(!IsBlank(SelectedFile),
        IfError(GetXML_Nabavni_Nalog.Run(SelectedFile, SelectedFolder),
            Notify("Error occurred while Get request, check if file exists.",NotificationType.Error,5000),
            UpdateContext({purchase: GetXML_Nabavni_Nalog.Run(SelectedFile, SelectedFolder)})
        );
        
        UpdateContext({purchase_line: purchase.purchase_line});
        UpdateContext({purchase_header: ParseJSON(purchase.purchase_header)});
        
        Clear(colPurchaseLines);
        ForAll(
            ParseJSON(purchase_line),
            Collect(
                colPurchaseLines,
                {
                     Document_Type: Text(ThisRecord.Document_Type),
                      'Buy-from_Vendor_No.': Text(ThisRecord.'Buy-from_Vendor_No.'),
                      Document_No: Text(ThisRecord.Document_No),
                      Line_No: Text(ThisRecord.Line_No),
                      Type: Text(ThisRecord.Type),
                      Item_No: Text(ThisRecord.Item_No),
                      Location_Code: Text(ThisRecord.Location_Code),
                      Posting_Group: Text(ThisRecord.Posting_Group),
                      Description: Text(ThisRecord.Description),
                      Unit_Of_Measure: Text(ThisRecord.Unit_Of_Measure),
                      Quantity: Text(ThisRecord.Quantity),
                      LOT_No: Text(ThisRecord.LOT_No),
                      Exp_Date: Text(ThisRecord.Exp_Date)
                }
            );
        );
        
        ClearCollect(colOriginalPurchaseLines, colPurchaseLines);
        )

    NabavniNalogScreenContainer As groupContainer.verticalAutoLayoutContainer:
        DropShadow: =DropShadow.Light
        Fill: =RGBA(245, 245, 245, 1)
        Height: =Parent.Height
        LayoutAlignItems: =LayoutAlignItems.Stretch
        LayoutDirection: =LayoutDirection.Vertical
        LayoutGap: =16
        LayoutMode: =LayoutMode.Auto
        PaddingBottom: =16
        PaddingLeft: =16
        PaddingRight: =16
        PaddingTop: =16
        RadiusBottomLeft: =4
        RadiusBottomRight: =4
        RadiusTopLeft: =4
        RadiusTopRight: =4
        Width: =Parent.Width
        ZIndex: =1

        NabavniNalogHeaderContainer As groupContainer.horizontalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            DropShadow: =DropShadow.Light
            Fill: =RGBA(255, 255, 255, 1)
            Height: =75
            LayoutMinHeight: =75
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            RadiusBottomLeft: =8
            RadiusBottomRight: =8
            RadiusTopLeft: =8
            RadiusTopRight: =8
            Width: =1335
            ZIndex: =1

            NabavniNalogHeader As Header:
                BasePaletteColor: =RGBA(249, 83, 109, 1)
                DisplayMode: =DisplayMode.Edit
                FontColor: =
                Height: =75
                LayoutMinHeight: =75
                LayoutMinWidth: =Parent.Width
                Logo: =FFLogo
                OnSelectLogo: =Navigate(scrEntry)
                Style: ='Header.Style'.Primary
                Title: ="NABAVNI NALOG"
                UserEmail: =User().Email
                UserImage: =User().Image
                UserName: =User().FullName
                Width: =Parent.Width
                X: =0
                Y: =0
                ZIndex: =1

        NabavniNalogMainContainer As groupContainer.verticalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            DropShadow: =DropShadow.Light
            Fill: =RGBA(255, 255, 255, 1)
            LayoutDirection: =LayoutDirection.Vertical
            LayoutMinHeight: =580
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            RadiusBottomLeft: =8
            RadiusBottomRight: =8
            RadiusTopLeft: =8
            RadiusTopRight: =8
            ZIndex: =2

            NabavniNalogDataContainer As groupContainer.manualLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                DropShadow: =DropShadow.Light
                Height: =565
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                RadiusBottomLeft: =4
                RadiusBottomRight: =4
                RadiusTopLeft: =4
                RadiusTopRight: =4
                Width: =1319
                X: =6
                Y: =15
                ZIndex: =2

                "PurchaseItemsGallery As gallery.'BrowseLayout_Vertical_OneTextVariant_ver5.0'":
                    BorderColor: =RGBA(89, 0, 0, 1)
                    BorderThickness: =0.5
                    DelayItemLoading: =true
                    Height: =375
                    Items: =colPurchaseLines
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplatePadding: =0
                    TemplateSize: =194
                    Width: =1284
                    X: =28
                    Y: =169
                    ZIndex: =1

                    Separator1 As rectangle:
                        BorderColor: =RGBA(89, 0, 0, 1)
                        BorderThickness: =0.5
                        Fill: =RGBA(189, 49, 51, 1)
                        Height: =2
                        OnSelect: =Select(Parent)
                        Width: =Parent.TemplateWidth
                        Y: =Parent.TemplateHeight - Self.Height
                        ZIndex: =3

                    Rectangle1 As rectangle:
                        BorderColor: =RGBA(89, 0, 0, 1)
                        Fill: =RGBA(89, 0, 0, 1)
                        Height: =Parent.TemplateHeight - Separator1.Height
                        OnSelect: =Select(Parent)
                        Visible: =ThisItem.IsSelected
                        Width: =4
                        ZIndex: =4

                    Group12 As group:
                        Height: =5
                        Width: =5
                        X: =60
                        Y: =60
                        ZIndex: =46

                        Label2_6 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(89, 0, 0, 1)
                            BorderThickness: =0.5
                            Color: =RGBA(0, 0, 0, 1)
                            DisabledColor: =RGBA(166, 166, 166, 1)
                            Height: =23
                            OnSelect: =Select(Parent)
                            PaddingBottom: =10
                            PaddingLeft: =0
                            Size: =13
                            Text: ="Line No."
                            X: =42
                            Y: =17
                            ZIndex: =12

                        "LineNo As 'Text input'":
                            Align: ='TextInputCanvas.Align'.Center
                            BasePaletteColor: =
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =40
                            Value: =ThisItem.Line_No
                            Width: =150
                            X: =42
                            Y: =40
                            ZIndex: =36

                    Group16 As group:
                        Height: =5
                        Width: =5
                        X: =60
                        Y: =60
                        ZIndex: =46

                        Label2_8 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(89, 0, 0, 1)
                            BorderThickness: =0.5
                            Color: =RGBA(0, 0, 0, 1)
                            DisabledColor: =RGBA(166, 166, 166, 1)
                            Height: =23
                            OnSelect: =Select(Parent)
                            PaddingBottom: =10
                            PaddingLeft: =0
                            Size: =13
                            Text: ="Type"
                            Width: =208
                            X: =218
                            Y: =17
                            ZIndex: =14

                        "Type As 'Text input'":
                            Align: ='TextInputCanvas.Align'.Center
                            BasePaletteColor: =
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =40
                            Value: =ThisItem.Type
                            Width: =208
                            X: =218
                            Y: =40
                            ZIndex: =37

                    Group11 As group:
                        Height: =5
                        Width: =5
                        X: =60
                        Y: =60
                        ZIndex: =46

                        Label2_10 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(89, 0, 0, 1)
                            BorderThickness: =0.5
                            Color: =RGBA(0, 0, 0, 1)
                            DisabledColor: =RGBA(166, 166, 166, 1)
                            Height: =23
                            OnSelect: =Select(Parent)
                            PaddingBottom: =10
                            PaddingLeft: =0
                            Size: =13
                            Text: ="Item No."
                            Width: =194
                            X: =455
                            Y: =17
                            ZIndex: =16

                        "ItemNo As 'Text input'":
                            Align: ='TextInputCanvas.Align'.Center
                            BasePaletteColor: =
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =36
                            Value: =ThisItem.Item_No
                            Width: =194
                            X: =455
                            Y: =42
                            ZIndex: =38

                    Group13 As group:
                        Height: =5
                        Width: =5
                        X: =60
                        Y: =60
                        ZIndex: =46

                        Label2_12 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(89, 0, 0, 1)
                            BorderThickness: =0.5
                            Color: =RGBA(0, 0, 0, 1)
                            DisabledColor: =RGBA(166, 166, 166, 1)
                            Height: =23
                            OnSelect: =Select(Parent)
                            PaddingBottom: =10
                            PaddingLeft: =0
                            Size: =13
                            Text: ="Location Code"
                            Width: =208
                            X: =676
                            Y: =17
                            ZIndex: =19

                        "LocationCode As 'Text input'":
                            Align: ='TextInputCanvas.Align'.Center
                            BasePaletteColor: =
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =36
                            Value: =ThisItem.Location_Code
                            Width: =208
                            X: =676
                            Y: =40
                            ZIndex: =39

                    Group14 As group:
                        Height: =5
                        Width: =5
                        X: =60
                        Y: =60
                        ZIndex: =46

                        Label2_14 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(89, 0, 0, 1)
                            BorderThickness: =0.5
                            Color: =RGBA(0, 0, 0, 1)
                            DisabledColor: =RGBA(166, 166, 166, 1)
                            Height: =23
                            OnSelect: =Select(Parent)
                            PaddingBottom: =10
                            PaddingLeft: =0
                            Size: =13
                            Text: ="Posting Group"
                            Width: =194
                            X: =911
                            Y: =17
                            ZIndex: =22

                        "PostingGroup As 'Text input'":
                            Align: ='TextInputCanvas.Align'.Center
                            BasePaletteColor: =
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =30
                            Value: =ThisItem.Posting_Group
                            Width: =194
                            X: =911
                            Y: =40
                            ZIndex: =40

                    Group9 As group:
                        Height: =5
                        Width: =5
                        X: =60
                        Y: =60
                        ZIndex: =46

                        Label2_20 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(89, 0, 0, 1)
                            BorderThickness: =0.5
                            Color: =RGBA(0, 0, 0, 1)
                            DisabledColor: =RGBA(166, 166, 166, 1)
                            Height: =23
                            OnSelect: =Select(Parent)
                            PaddingBottom: =10
                            PaddingLeft: =0
                            Size: =13
                            Text: ="Quantity"
                            Width: =124
                            X: =1130
                            Y: =17
                            ZIndex: =30

                        "QuantityVal As 'Text input'":
                            Align: ='TextInputCanvas.Align'.Center
                            BasePaletteColor: =
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =31
                            OnChange: |-
                                =UpdateIf(colPurchaseLines, PurchaseItemsGallery.Selected.Item_No = ThisRecord.Item_No ,{Quantity: Value(QuantityVal.Value)})
                            Value: =ThisItem.Quantity
                            Width: =124
                            X: =1130
                            Y: =39
                            ZIndex: =41

                    Group15 As group:
                        Height: =5
                        Width: =5
                        X: =60
                        Y: =60
                        ZIndex: =46

                        Label2_16 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(89, 0, 0, 1)
                            BorderThickness: =0.5
                            Color: =RGBA(0, 0, 0, 1)
                            DisabledColor: =RGBA(166, 166, 166, 1)
                            Height: =23
                            OnSelect: =Select(Parent)
                            PaddingBottom: =10
                            PaddingLeft: =0
                            Size: =13
                            Text: ="Description"
                            Width: =534
                            X: =42
                            Y: =104
                            ZIndex: =25

                        "Description As 'Text input'":
                            Align: ='TextInputCanvas.Align'.Center
                            BasePaletteColor: =
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =40
                            Value: =ThisItem.Description
                            Width: =534
                            X: =42
                            Y: =127
                            ZIndex: =42

                    Group10 As group:
                        Height: =5
                        Width: =5
                        X: =60
                        Y: =60
                        ZIndex: =46

                        Label2_18 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(89, 0, 0, 1)
                            BorderThickness: =0.5
                            Color: =RGBA(0, 0, 0, 1)
                            DisabledColor: =RGBA(166, 166, 166, 1)
                            Height: =23
                            OnSelect: =Select(Parent)
                            PaddingBottom: =10
                            PaddingLeft: =0
                            Size: =13
                            Text: ="Unit Of Measure"
                            Width: =194
                            X: =600
                            Y: =104
                            ZIndex: =27

                        "UnitOfMeasure As 'Text input'":
                            Align: ='TextInputCanvas.Align'.Center
                            BasePaletteColor: =
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =40
                            Value: =ThisItem.Unit_Of_Measure
                            Width: =194
                            X: =600
                            Y: =127
                            ZIndex: =43

                    Group8 As group:
                        Height: =5
                        Width: =5
                        X: =60
                        Y: =60
                        ZIndex: =46

                        Label2_22 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(89, 0, 0, 1)
                            BorderThickness: =0.5
                            Color: =RGBA(0, 0, 0, 1)
                            DisabledColor: =RGBA(166, 166, 166, 1)
                            Height: =23
                            OnSelect: =Select(Parent)
                            PaddingBottom: =10
                            PaddingLeft: =0
                            Size: =13
                            Text: ="LOT No."
                            Width: =208
                            X: =821
                            Y: =104
                            ZIndex: =33

                        "LotNo As 'Text input'":
                            Align: ='TextInputCanvas.Align'.Center
                            BasePaletteColor: =
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =38
                            Value: =ThisItem.LOT_No
                            Width: =208
                            X: =821
                            Y: =127
                            ZIndex: =44

                    Group7 As group:
                        Height: =5
                        Width: =5
                        X: =60
                        Y: =60
                        ZIndex: =46

                        Label2_24 As label:
                            Align: =Align.Center
                            BorderColor: =RGBA(89, 0, 0, 1)
                            BorderThickness: =0.5
                            Color: =RGBA(0, 0, 0, 1)
                            DisabledColor: =RGBA(166, 166, 166, 1)
                            Height: =23
                            OnSelect: =Select(Parent)
                            PaddingBottom: =10
                            PaddingLeft: =0
                            Size: =13
                            Text: ="Exp Date"
                            Width: =194
                            X: =1060
                            Y: =104
                            ZIndex: =35

                        "ExpDate As 'Text input'":
                            Align: ='TextInputCanvas.Align'.Center
                            BasePaletteColor: =
                            DisplayMode: =DisplayMode.Edit
                            FontColor: =
                            Height: =38
                            Value: =ThisItem.Exp_Date
                            Width: =194
                            X: =1060
                            Y: =127
                            ZIndex: =45

                LinesTitle As Text:
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =32
                    Size: =20
                    Text: ="Purchase"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =96
                    X: =13
                    Y: =0
                    ZIndex: =2

                HeaderTitle As Text:
                    DisplayMode: =DisplayMode.Edit
                    FontColor: =
                    Height: =29
                    Size: =20
                    Text: ="Purchase items"
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =150
                    X: =13
                    Y: =122
                    ZIndex: =11

                DocumentType_NN_Group As group:
                    Height: =5
                    Width: =5
                    X: =60
                    Y: =60
                    ZIndex: =24

                    Label2_1 As label:
                        Align: =Align.Center
                        BorderColor: =RGBA(89, 0, 0, 1)
                        BorderThickness: =0.5
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        DisplayMode: =
                        Height: =23
                        OnSelect: =
                        PaddingBottom: =10
                        PaddingLeft: =0
                        Size: =13
                        Text: ="Document Type"
                        X: =28
                        Y: =40
                        ZIndex: =4

                    "NN_DocumentType As 'Text input'":
                        Align: ='TextInputCanvas.Align'.Center
                        BasePaletteColor: =
                        DisplayMode: =DisplayMode.Edit
                        FontColor: =
                        FontSize: =13
                        Height: =40
                        Value: =purchase_header.Document_Type
                        Width: =150
                        X: =28
                        Y: =63
                        ZIndex: =18

                BuyFromVendorNo_NN_Group As group:
                    Height: =5
                    Width: =5
                    X: =60
                    Y: =60
                    ZIndex: =24

                    Label2_2 As label:
                        Align: =Align.Center
                        BorderColor: =RGBA(89, 0, 0, 1)
                        BorderThickness: =0.5
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        DisplayMode: =
                        Height: =23
                        OnSelect: =
                        PaddingBottom: =10
                        PaddingLeft: =0
                        Size: =13
                        Text: ="Buy from Vendor No."
                        Width: =205
                        X: =206
                        Y: =40
                        ZIndex: =7

                    "NN_BuyFromVendorNo As 'Text input'":
                        Align: ='TextInputCanvas.Align'.Center
                        BasePaletteColor: =
                        DisplayMode: =DisplayMode.Edit
                        FontColor: =
                        FontSize: =13
                        Height: =40
                        Value: =purchase_header.'Buy-from_Vendor_No.'
                        Width: =205
                        X: =206
                        Y: =63
                        ZIndex: =19

                No_NN_Group As group:
                    Height: =5
                    Width: =5
                    X: =60
                    Y: =60
                    ZIndex: =24

                    Label2_4 As label:
                        Align: =Align.Center
                        BorderColor: =RGBA(89, 0, 0, 1)
                        BorderThickness: =0.5
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        DisplayMode: =
                        Height: =23
                        OnSelect: =
                        PaddingBottom: =10
                        PaddingLeft: =0
                        Size: =13
                        Text: ="No."
                        Width: =163
                        X: =441
                        Y: =40
                        ZIndex: =10

                    "NN_No As 'Text input'":
                        Align: ='TextInputCanvas.Align'.Center
                        BasePaletteColor: =
                        DisplayMode: =DisplayMode.Edit
                        FontColor: =
                        FontSize: =13
                        Height: =40
                        Value: =purchase_header.'No.'
                        Width: =163
                        X: =441
                        Y: =63
                        ZIndex: =20

                ShipToName_NN_Group As group:
                    Height: =5
                    Width: =5
                    X: =60
                    Y: =60
                    ZIndex: =24

                    Label2_26 As label:
                        Align: =Align.Center
                        BorderColor: =RGBA(89, 0, 0, 1)
                        BorderThickness: =0.5
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        DisplayMode: =
                        Height: =23
                        OnSelect: =
                        PaddingBottom: =10
                        PaddingLeft: =0
                        Size: =13
                        Text: ="Ship to Name"
                        Width: =246
                        X: =635
                        Y: =40
                        ZIndex: =13

                    "NN_ShipToName As 'Text input'":
                        Align: ='TextInputCanvas.Align'.Center
                        BasePaletteColor: =
                        DisplayMode: =DisplayMode.Edit
                        FontColor: =
                        FontSize: =13
                        Height: =40
                        Value: =purchase_header.'Ship-to_Name'
                        Width: =246
                        X: =635
                        Y: =63
                        ZIndex: =21

                ShipToName2_NN_Group As group:
                    Height: =5
                    Width: =5
                    X: =60
                    Y: =60
                    ZIndex: =24

                    Label2_28 As label:
                        Align: =Align.Center
                        BorderColor: =RGBA(89, 0, 0, 1)
                        BorderThickness: =0.5
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        DisplayMode: =
                        Height: =23
                        OnSelect: =
                        PaddingBottom: =10
                        PaddingLeft: =0
                        Size: =13
                        Text: ="Ship to Name 2"
                        Width: =194
                        X: =909
                        Y: =40
                        ZIndex: =15

                    "NN_ShipToName2 As 'Text input'":
                        Align: ='TextInputCanvas.Align'.Center
                        BasePaletteColor: =
                        DisplayMode: =DisplayMode.Edit
                        FontColor: =
                        FontSize: =13
                        Height: =40
                        Value: =purchase_header.'Ship-to_Name_2'
                        Width: =194
                        X: =909
                        Y: =63
                        ZIndex: =22

                OrderDate_NN_Group As group:
                    Height: =5
                    Width: =5
                    X: =60
                    Y: =60
                    ZIndex: =24

                    Label2_30 As label:
                        Align: =Align.Center
                        BorderColor: =RGBA(89, 0, 0, 1)
                        BorderThickness: =0.5
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        DisplayMode: =
                        Height: =23
                        OnSelect: =
                        PaddingBottom: =10
                        PaddingLeft: =0
                        Size: =13
                        Text: ="Order Date"
                        Width: =186
                        X: =1127
                        Y: =40
                        ZIndex: =17

                    "NN_OrderDate As 'Text input'":
                        Align: ='TextInputCanvas.Align'.Center
                        BasePaletteColor: =
                        DisplayMode: =DisplayMode.Edit
                        FontColor: =
                        FontSize: =13
                        Height: =40
                        Value: =purchase_header.Order_Date
                        Width: =186
                        X: =1127
                        Y: =63
                        ZIndex: =23

        NabavniNalogFooterContainer As groupContainer.horizontalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            BorderColor: =RGBA(233, 79, 76, 1)
            DropShadow: =DropShadow.Light
            Fill: =RGBA(237, 237, 237, 1)
            Height: =50
            LayoutMinHeight: =50
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            RadiusBottomLeft: =8
            RadiusBottomRight: =8
            RadiusTopLeft: =8
            RadiusTopRight: =8
            Width: =1335
            ZIndex: =4

            Button6_2 As button:
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                Fill: =RGBA(164, 38, 44, 1)
                FontWeight: =FontWeight.Semibold
                Height: =50
                HoverColor: =RGBA(255, 255, 255, 1)
                HoverFill: =ColorFade(RGBA(164, 38, 44, 1), -20%)
                OnSelect: =Set(varShowGetFileModal,true);
                Size: =15
                Text: ="Get xml by name"
                ZIndex: =1

            Button6_3 As button:
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(164, 38, 44, 1)
                FontWeight: =FontWeight.Semibold
                Height: =50
                HoverColor: =RGBA(255, 255, 255, 1)
                HoverFill: =ColorFade(RGBA(164, 38, 44, 1), -20%)
                OnSelect: |-
                    =Set(purchase_header, Blank());
                    Clear(colPurchaseLines);
                    Set(isCreated, true);
                Size: =15
                Text: ="Create xml"
                ZIndex: =2

            Button6_1 As button:
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayMode: =DisplayMode.Disabled
                Fill: =RGBA(164, 38, 44, 1)
                FontWeight: =FontWeight.Semibold
                Height: =50
                HoverColor: =RGBA(255, 255, 255, 1)
                HoverFill: =ColorFade(RGBA(164, 38, 44, 1), -20%)
                OnSelect: |-
                    =Set(varShowUploadXMLFileModal,true);
                    Set(varXMLSaveButton, true);
                Size: =15
                Text: ="Upload xml"
                ZIndex: =3

            Button6 As button:
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                Fill: =RGBA(164, 38, 44, 1)
                FontWeight: =FontWeight.Semibold
                Height: =50
                HoverColor: =RGBA(255, 255, 255, 1)
                HoverFill: =ColorFade(RGBA(164, 38, 44, 1), -20%)
                OnSelect: |-
                    =Set(purchase_header, Blank());
                    Clear(colPurchaseLines);
                Size: =15
                Text: ="Clear view"
                ZIndex: =4

            Button6_24 As button:
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                Fill: =RGBA(164, 38, 44, 1)
                FontWeight: =FontWeight.Semibold
                Height: =50
                HoverColor: =RGBA(255, 255, 255, 1)
                HoverFill: =ColorFade(RGBA(164, 38, 44, 1), -20%)
                OnSelect: |-
                    =ClearCollect(colPurchaseLines, colOriginalPurchaseLines);
                    Reset(nabavniNalogReadyForNavCheckbox);
                Size: =15
                Text: ="Reset"
                ZIndex: =5

            nabavniNalogReadyForNavCheckbox As Checkbox:
                AlignInContainer: =AlignInContainer.Start
                Checked: =false
                DisplayMode: =DisplayMode.Edit
                FontUnderline: =false
                FontWeight: =FontWeight.Bold
                Height: =Parent.Height
                Label: ="Ready for NAV"
                LayoutMinHeight: =32
                LayoutMinWidth: =160
                OnCheck: =false
                OnUncheck: =false
                Width: =160
                X: =0
                Y: =0
                ZIndex: =6

    "'Upload xml file - modal (brisati poslije)' As group":
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =9

        Rectangle4_2 As rectangle:
            BorderColor: =RGBA(89, 0, 0, 1)
            Fill: =RGBA(179, 118, 118, 0.21)
            Height: =768
            Visible: =varShowUploadXMLFileModal
            Width: =1366
            ZIndex: =2

        Rectangle5_1 As rectangle:
            BorderColor: =RGBA(89, 0, 0, 1)
            Fill: =RGBA(255, 255, 255, 1)
            Height: =350
            Visible: =varShowUploadXMLFileModal
            Width: =606
            X: =400
            Y: =182
            ZIndex: =3

        Button3_5 As button:
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            DisabledFill: =RGBA(244, 244, 244, 1)
            DisplayMode: =If(CountRows(attach.Attachments)>0, DisplayMode.Edit, DisplayMode.Disabled)
            Fill: =RGBA(164, 38, 44, 1)
            FontWeight: =FontWeight.Semibold
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(164, 38, 44, 1), -20%)
            OnSelect: |-
                =Set(uploadedFileName, UploadXMLFile.Run({file:{name: First(attach.Attachments).Name, contentBytes:First(attach.Attachments).Value}}));
                Set(x, First(attach.Attachments).Name);
                Set(file_Name,Left(x, Len(x)-4));
                
                Set(purchase, GetXML_Nabavni_Nalog.Run(file_Name, "ReadyForProcessing"));
                Set(purchase_line, purchase.purchase_line);
                Set(purchase_header, ParseJSON(purchase.purchase_header));
                
                Set(varShowUploadXMLFileModal,false);
                Clear(colPurchaseLines);
                ForAll(
                    ParseJSON(purchase_line),
                    Collect(
                        colPurchaseLines,
                        {
                            Purchase_Line: {
                                Document_Type: ThisRecord.Document_Type,
                                'Buy-from_Vendor_No.': ThisRecord.'Buy-from_Vendor_No.',
                                Document_No: ThisRecord.Document_No,
                                Line_No: ThisRecord.Line_No,
                                Type: ThisRecord.Type,
                                Item_No: ThisRecord.Item_No,
                                Location_Code: ThisRecord.Location_Code,
                                Posting_Group: ThisRecord.Posting_Group,
                                Description: ThisRecord.Description,
                                Unit_Of_Measure: ThisRecord.Unit_Of_Measure,
                                Quantity: ThisRecord.Quantity,
                                LOT_No: ThisRecord.LOT_No,
                                Exp_Date: ThisRecord.Exp_Date
                            }
                        }
                    )
                );
                
                Set(isCreated,false);
                //Reset(attach);
            Size: =15
            Text: ="Upload file"
            Visible: =varShowUploadXMLFileModal
            X: =761
            Y: =467
            ZIndex: =4

        Button3_4 As button:
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            DisabledFill: =RGBA(244, 244, 244, 1)
            Fill: =RGBA(139, 154, 159, 1)
            FontWeight: =FontWeight.Semibold
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(164, 38, 44, 1), -20%)
            OnSelect: |-
                =Reset(attach);
                Set(varShowUploadXMLFileModal,false)
            Size: =15
            Text: ="Cancel"
            Visible: =varShowUploadXMLFileModal
            X: =515
            Y: =467
            ZIndex: =5

        Icon7 As icon.AddDocument:
            BorderColor: =RGBA(89, 0, 0, 1)
            Color: =RGBA(89, 0, 0, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(244, 244, 244, 1)
            Icon: =Icon.AddDocument
            Visible: =varShowUploadXMLFileModal
            X: =686
            Y: =206
            ZIndex: =6

        attach As attachments:
            AddAttachmentText: ="Upload file"
            BorderColor: =
            BorderThickness: =2
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            DisabledFill: =RGBA(244, 244, 244, 1)
            DisplayMode: =
            FocusedBorderThickness: =4
            Height: =130
            HoverColor: =RGBA(0, 0, 0, 1)
            HoverFill: =RGBA(222, 179, 184, 1)
            IsInDataCard: =true
            ItemColor: =RGBA(255, 255, 255, 1)
            ItemFill: =RGBA(164, 38, 44, 1)
            ItemHoverColor: =RGBA(0, 0, 0, 1)
            ItemHoverFill: =RGBA(222, 179, 184, 1)
            Items: =
            MaxAttachments: =1
            MaxAttachmentsText: =""
            NoAttachmentsText: ="There is no file."
            PaddingBottom: =5
            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
            PaddingRight: =5
            PaddingTop: =5
            PressedColor: =RGBA(255, 255, 255, 1)
            PressedFill: =RGBA(89, 0, 0, 1)
            Tooltip: =
            Visible: =varShowUploadXMLFileModal
            Width: =551
            X: =428
            Y: =299
            ZIndex: =7

    saveXml As button:
        DisabledBorderColor: =RGBA(166, 166, 166, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisabledFill: =RGBA(244, 244, 244, 1)
        DisplayMode: |-
            =//If(!IsBlank(purchase_header) || !IsBlank(purchase_line), DisplayMode.Edit, DisplayMode.Disabled)
            DisplayMode.Edit
        Fill: =RGBA(164, 38, 44, 1)
        FontWeight: =FontWeight.Semibold
        Height: =50
        HoverColor: =RGBA(255, 255, 255, 1)
        HoverFill: =ColorFade(RGBA(164, 38, 44, 1), -20%)
        OnSelect: |
            =UpdateContext({
                purchaseJsonData:
                JSON(
                    {
                        Purchase_Header: {
                            Document_Type: Text(purchase_header.Document_Type),
                            'Buy-from_Vendor_No.': Text(purchase_header.'Buy-from_Vendor_No.'),
                            'No.': Text(purchase_header.'No.'),
                            'Ship-to_Code': Text(purchase_header.'Ship-to_Code'),
                            'Ship-to_Name': Text(purchase_header.'Ship-to_Name'),
                            'Ship-to_Name_2': Text(purchase_header.'Ship-to_Name_2'),
                            'Ship-to_Address': Text(purchase_header.'Ship-to_Address'),
                            'Ship-to_Address_2': Text(purchase_header.'Ship-to_Address_2'),
                            'Ship-to_City': Text(purchase_header.'Ship-to_City'),
                            'Ship-to_Contact': Text(purchase_header.'Ship-to_Contact'),
                            Order_Date: Text(purchase_header.Order_Date),
                            Expected_Receipt_Date: Text(purchase_header.Expected_Receipt_Date),
                            Due_Date: Text(purchase_header.Due_Date),
                            Shipment_Method_Code: Text(purchase_header.Shipment_Method_Code),
                            Location_Code: Text(purchase_header.Location_Code),
                            Vendor_Posting_Group: Text(purchase_header.Vendor_Posting_Group),
                            Currency_Code: Text(purchase_header.Currency_Code),
                            Language_Code: Text(purchase_header.Language_Code),
                            Purchaser_Code: Text(purchase_header.Purchaser_Code),
                            Amount: Text(purchase_header.Amount),
                            Amount_Including_VAT: Text(purchase_header.Amount_Including_VAT),
                            'Vendor_Order_No.': Text(purchase_header.'Vendor_Order_No.'),
                            'Vendor_Shipment_No.': Text(purchase_header.'Vendor_Shipment_No.'),
                            'Vendor_Invoice_No.': Text(purchase_header.'Vendor_Invoice_No.'),
                            'VAT_Registration_No.': Text(purchase_header.VAT_Registration_No),
                            Gen_Bus_Posting_Group: Text(purchase_header.Gen_Bus_Posting_Group),
                            Transport_Method: Text(purchase_header.Transport_Method),
                            VAT_Country_Code: Text(purchase_header.VAT_Country_Code),
                            'Buy-from_Vendor_Name': Text(purchase_header.'Buy-from_Vendor_Name'),
                            'Buy-from_Vendor_Name_2': Text(purchase_header.'Buy-from_Vendor_Name_2'),
                            'Buy-from_Address': Text(purchase_header.'Buy-from_Address'),
                            'Buy-from_Address_2': Text(purchase_header.'Buy-from_Address_2'),
                            'Buy-from_City': Text(purchase_header.'Buy-from_City'),
                            'Buy-from_Contact': Text(purchase_header.'Buy-from_Contact'),
                            'Buy-from_Post_Code': Text(purchase_header.'Buy-from_Post_Code'),
                            'Buy-from_County': Text(purchase_header.'Buy-from_County'),
                            'Buy-from_Country_Code': Text(purchase_header.'Buy-from_Country_Code'),
                            'Ship-to_Post_Code': Text(purchase_header.'Ship-to_Post_Code'),
                            'Ship-to_County': Text(purchase_header.'Ship-to_County'),
                            'Ship-to_Country_Code': Text(purchase_header.'Ship-to_Country_Code'),
                            Document_Date: Text(purchase_header.Document_Date),
                            Area: Text(purchase_header.Area),
                            Tax_Area_Code: Text(purchase_header.Tax_Area_Code),
                            VAT_Bus_Posting_Group: Text(purchase_header.'VAT_Bus._Posting_Group'),
                            Status: Text(purchase_header.Status),
                            'Campaign_No.': Text(purchase_header.'Campaign_No.'),
                            'Buy-from_Contact_No.': Text(purchase_header.'Buy-from_Contact_No.'),
                            Requested_Receipt_Date: Text(purchase_header.Requested_Receipt_Date),
                            Promised_Receipt_Date: Text(purchase_header.Promised_Receipt_Date),
                            Purchase_Line: ForAll(colPurchaseLines,{
                                'Buy-from_Vendor_No.': Text('Buy-from_Vendor_No.'),
                                Description: Text(Description),
                                Document_No:Text(Document_No),
                                Document_Type:Text(Document_Type),
                                Exp_Date:Text(Exp_Date),
                                Item_No:Text(Item_No),
                                LOT_No:Text(LOT_No),
                                Line_No:Text(Line_No),
                                Location_Code:Text(Location_Code),
                                Posting_Group:Text(Posting_Group),
                                Quantity:Text(Quantity),
                                Type:Text(Type),
                                Unit_Of_Measure:Text(Unit_Of_Measure)
                            })
                        }
                    },JSONFormat.IgnoreUnsupportedTypes
                )
            });
            
            /*
            If(!isCreated, 
            UpdateXML.Run(xmlFile, file_Name, "ReadyForProcessing"); Set(purchase, GetXML_Nabavni_Nalog.Run(file_Name, "ReadyForProcessing")); Set(purchase_line, purchase.purchase_line); Set(purchase_header, ParseJSON(purchase.purchase_header)););
            
            Notify(file_Name);*/
            
            //If(!isCreated,UpdateXML.Run(purchaseJsonData, file_Name, SelectedFolder, true));
            UpdateXML.Run(purchaseJsonData, file_Name, SelectedFolder, nabavniNalogReadyForNavCheckbox.Checked);
        Size: =15
        Text: ="Save"
        Width: =225
        X: =1124
        Y: =704
        ZIndex: =15

    "'Get xml file by name - modal (brisati poslije)' As group":
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =15

        Rectangle4_3 As rectangle:
            BorderColor: =RGBA(89, 0, 0, 1)
            Fill: =RGBA(179, 118, 118, 0.21)
            Height: =768
            Visible: =varShowGetFileModal
            Width: =1366
            ZIndex: =8

        Rectangle5_2 As rectangle:
            BorderColor: =RGBA(89, 0, 0, 1)
            Fill: =RGBA(255, 255, 255, 1)
            Height: =350
            Visible: =varShowGetFileModal
            Width: =606
            X: =400
            Y: =182
            ZIndex: =9

        Button3_7 As button:
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            DisabledFill: =RGBA(244, 244, 244, 1)
            DisplayMode: |
                =If(!IsBlank(fileName.Value), DisplayMode.Edit, DisplayMode.Disabled)
            Fill: =RGBA(164, 38, 44, 1)
            FontWeight: =FontWeight.Bold
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(164, 38, 44, 1), -20%)
            OnSelect: |
                =Set(varShowGetFileModal, false);
                Set(file_Name, fileName.Value);
                
                IfError(GetXML_Nabavni_Nalog.Run(file_Name, "ReadyForProcessing"),
                    Notify("Error occurred while Get request, check if file exists.",NotificationType.Error,5000),
                    UpdateContext({purchase: GetXML_Nabavni_Nalog.Run(file_Name, "ReadyForProcessing")})
                );
                
                UpdateContext({purchase_line: purchase.purchase_line});
                UpdateContext({purchase_header: ParseJSON(purchase.purchase_header)});
                
                Clear(colPurchaseLines);
                ForAll(
                    ParseJSON(purchase_line),
                    Collect(
                        colPurchaseLines,
                        {
                             Document_Type: Text(ThisRecord.Document_Type),
                              'Buy-from_Vendor_No.': Text(ThisRecord.'Buy-from_Vendor_No.'),
                              Document_No: Text(ThisRecord.Document_No),
                              Line_No: Text(ThisRecord.Line_No),
                              Type: Text(ThisRecord.Type),
                              Item_No: Text(ThisRecord.Item_No),
                              Location_Code: Text(ThisRecord.Location_Code),
                              Posting_Group: Text(ThisRecord.Posting_Group),
                              Description: Text(ThisRecord.Description),
                              Unit_Of_Measure: Text(ThisRecord.Unit_Of_Measure),
                              Quantity: Text(ThisRecord.Quantity),
                              LOT_No: Text(ThisRecord.LOT_No),
                              Exp_Date: Text(ThisRecord.Exp_Date)
                        }
                    );
                );
                
                ClearCollect(colOriginalPurchaseLines, colPurchaseLines);
            Size: =15
            Text: ="Get file"
            Visible: =varShowGetFileModal
            X: =761
            Y: =467
            ZIndex: =10

        Button3_6 As button:
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            DisabledFill: =RGBA(244, 244, 244, 1)
            Fill: =RGBA(139, 154, 159, 1)
            FontWeight: =FontWeight.Semibold
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(164, 38, 44, 1), -20%)
            OnSelect: |-
                =Reset(fileName);
                Set(varShowGetFileModal,false);
            Size: =15
            Text: ="Cancel"
            Visible: =varShowGetFileModal
            X: =515
            Y: =467
            ZIndex: =11

        "fileName As 'Text input'":
            BasePaletteColor: =
            DisplayMode: =DisplayMode.Edit
            FontColor: =
            Height: =50
            Visible: =varShowGetFileModal
            Width: =476
            X: =465
            Y: =339
            ZIndex: =12

        Label3 As label:
            BorderColor: =RGBA(89, 0, 0, 1)
            Color: =RGBA(0, 0, 0, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            Size: =13
            Text: ="File name"
            Visible: =varShowGetFileModal
            X: =465
            Y: =299
            ZIndex: =13

        Icon4 As icon.ListScrollEmpty:
            BorderColor: =RGBA(89, 0, 0, 1)
            Color: =RGBA(89, 0, 0, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledColor: =RGBA(244, 244, 244, 1)
            Icon: =Icon.ListScrollEmpty
            Visible: =varShowGetFileModal
            X: =686
            Y: =206
            ZIndex: =14

