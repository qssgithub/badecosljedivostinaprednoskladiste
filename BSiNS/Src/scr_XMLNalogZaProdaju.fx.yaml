"scr_XMLNalogZaProdaju As screen.'autoLayout_HeaderFooter_ver1.0'":
    Fill: =RGBA(234, 83, 109, 1)
    LoadingSpinnerColor: =App.Theme.Colors.Primary
    OnHidden: |
        =ClearCollect(
            colLines,
            Blank()
        );
        ClearCollect(
            colLocked,
            Blank()
        );
    OnVisible: |
        =Set(
            isLoading,
            true
        );
        If(
            !IsBlank(SelectedFile),
            IfError(
                UpdateContext(
                    {
                        xmlData: (ParseJSON(
                            GetXml.Run(
                                SelectedFile,
                                SelectedFolder
                            ).response
                        ).Sales_Header )
                    }
                ),
                Notify(
                    "Greška u obradi.",
                    NotificationType.Error,
                    2000
                )
            )
        );
        UpdateContext(
            {
                header: {
                    Amount: Text(xmlData.Amount),
                    Amount_Including_VAT: Text(xmlData.Amount_Including_VAT),
                    Bank_Name: Text(xmlData.Bank_Name),
                    Bank_No: Text(xmlData.Bank_No),
                    'Bill-to_Contact_No.': Text(xmlData.'Bill-to_Contact_No.'),
                    'Bill-to_Address': Text(xmlData.'Bill-to_Address'),
                    'Bill-to_City': Text(xmlData.'Bill-to_City'),
                    'Bill-to_Contact': Text(xmlData.'Bill-to_Contact'),
                    'Bill-to_Cust_No': Text(xmlData.'Bill-to_Cust_No'),
                    'Bill-to_Name': Text(xmlData.'Bill-to_Name'),
                    'Bill-to_PostCode': Text(xmlData.'Bill-to_PostCode'),
                    Customer_Price_Group: Text(xmlData.Customer_Price_Group),
                    Document_Date: Text(xmlData.Document_Date),
                    Document_Type: Text(xmlData.Document_Type),
                    Due_Date: Text(xmlData.Due_Date),
                    Ext_Doc_No: Text(xmlData.Ext_Doc_No),
                    'Gen._Bus._Posting_Group': Text(xmlData.'Gen._Bus._Posting_Group'),
                    Location_Code: Text(xmlData.Location_Code),
                    'No.': Text(xmlData.'No.'),
                    Order_Date: Text(xmlData.Order_Date),
                    Payement_Disc: Text(xmlData.Payement_Disc),
                    Payement_Method_Code: Text(xmlData.Payement_Method_Code),
                    Payment_Terms_Code: Text(xmlData.Payment_Terms_Code),
                    Posting_Date: Text(xmlData.Posting_Date),
                    Pmt_Discount_Date: Text(xmlData.Pmt_Discount_Date),
                    Quote_No: Text(xmlData.Quote_No),
                    Salesperson_Code: Text(xmlData.Salesperson_Code),
                    'Sell-To_Contact_No.': Text(xmlData.'Sell-To_Contact_No.'),
                    'Sell-To_Customer_No.': Text(xmlData.'Sell-To_Customer_No.'),
                    'Sell-to_Address': Text(xmlData.'Sell-to_Address'),
                    'Sell-to_City': Text(xmlData.'Sell-to_City'),
                    'Sell-to_Contact': Text(xmlData.'Sell-to_Contact'),
                    'Sell-to_Customer_Name': Text(xmlData.'Sell-to_Customer_Name'),
                    'Sell-to_PostCode': Text(xmlData.'Sell-to_PostCode'),
                    Shipp_Agent_Code: Text(xmlData.Shipp_Agent_Code),
                    Shipp_Agent_Service_Code: Text(xmlData.Shipp_Agent_Service_Code),
                    Shipp_Date: Text(xmlData.Shipp_Date),
                    Shipp_Method_Code: Text(xmlData.Shipp_Method_Code),
                    'Ship-to_Address': Text(xmlData.'Ship-to_Address'),
                    'Ship-to_City': Text(xmlData.'Ship-to_City'),
                    'Ship-to_Code': Text(xmlData.'Ship-to_Code'),
                    'Ship-to_Contact': Text(xmlData.'Ship-to_Contact'),
                    'Ship-to_Name': Text(xmlData.'Ship-to_Name'),
                    'Ship-to_Post_Code': Text(xmlData.'Ship-to_Post_Code'),
                    Shortcut_Dimension_1_Code: Text(xmlData.Shortcut_Dimension_1_Code),
                    Status: Text(xmlData.Status),
                    Tax_Area_Code: Text(xmlData.Tax_Area_Code),
                    Transport_Method: Text(xmlData.Transport_Method),
                    'VAT_Bus._Posting_Group': Text(xmlData.'VAT_Bus._Posting_Group'),
                    VAT_Country_Code: Text(xmlData.VAT_Country_Code),
                    'VAT_Registration_No.': Text(xmlData.'VAT_Registration_No.'),
                    VAT_Date: Text(xmlData.VAT_Date)
                }
            }
        );
        /*ClearCollect(
            colLines,
            IfError(
                ForAll(
                    xmlData.Sales_Line As line,
                    {
                        Description: Text(line.Description),
                        Document_No: Text(line.Document_No),
                        Document_Type: Text(line.Document_Type),
                        Item_No: Text(line.Item_No),
                        Line_Amount: Text(line.Line_Amount),
                        Line_Discount_Amount: Text(line.Line_Discount_Amount),
                        Line_No: Text(line.Line_No),
                        Location_Code: Text(line.Location_Code),
                        Outstand_Quantity: Text(line.Outstand_Quantity),
                        Posting_Group: Text(line.Posting_Group),
                        'Qty-to_Invoice': Text(line.'Qty-to_Invoice'),
                        'Qty-to_Ship': Text(line.'Qty-to_Ship'),
                        Quantity: Text(line.Quantity),
                        Res_Entry: IfError(
                            ForAll(
                                line.Res_Entry As entry,
                                {
                                    Created_By: Text(entry.Created_By),
                                    Creation_Date: Text(entry.Creation_Date),
                                    Entry_No: Text(entry.Entry_No),
                                    Exp_Date: Text(entry.Exp_Date),
                                    Exp_Receipt_Date: Text(entry.Exp_Receipt_Date),
                                    Item_No: Text(entry.Item_No),
                                    Item_Tracking: Text(entry.Item_Tracking),
                                    LOT_No: Text(entry.LOT_No),
                                    Location_Code: Text(entry.Location_Code),
                                    Positive: Text(entry.Positive),
                                    'Qty-to-Handle_Base': Text(entry.'Qty-to-Handle_Base'),
                                    'Qty-to-Invoice_Base': Text(entry.'Qty-to-Invoice_Base'),
                                    Quantity: Text(entry.Quantity),
                                    Quantity_Base: Text(entry.Quantity_Base),
                                    Quantity_Completed: Text(entry.Quantity_Completed),
                                    Quantity_NewLOT: Text(entry.Quantity_NewLOT),
                                    Res_Status: Text(entry.Res_Status),
                                    Shipment_Date: Text(entry.Shipment_Date),
                                    Source_ID: Text(entry.Source_ID),
                                    Source_Ref_No: Text(entry.Source_Ref_No),
                                    Source_SubType: Text(entry.Source_SubType),
                                    Source_Type: Text(entry.Source_Type)
                                }
                            ),
                            {
                                Created_By: Text(line.Res_Entry.Created_By),
                                Creation_Date: Text(line.Res_Entry.Creation_Date),
                                Entry_No: Text(line.Res_Entry.Entry_No),
                                Exp_Date: Text(line.Res_Entry.Exp_Date),
                                Exp_Receipt_Date: Text(line.Res_Entry.Exp_Receipt_Date),
                                Item_No: Text(line.Res_Entry.Item_No),
                                Item_Tracking: Text(line.Res_Entry.Item_Tracking),
                                LOT_No: Text(line.Res_Entry.LOT_No),
                                Location_Code: Text(line.Res_Entry.Location_Code),
                                Positive: Text(line.Res_Entry.Positive),
                                'Qty-to-Handle_Base': Text(line.Res_Entry.'Qty-to-Handle_Base'),
                                'Qty-to-Invoice_Base': Text(line.Res_Entry.'Qty-to-Invoice_Base'),
                                Quantity: Text(line.Res_Entry.Quantity),
                                Quantity_Base: Text(line.Res_Entry.Quantity_Base),
                                Quantity_Completed: Text(line.Res_Entry.Quantity_Completed),
                                Quantity_NewLOT: Text(line.Res_Entry.Quantity_NewLOT),
                                Res_Status: Text(line.Res_Entry.Res_Status),
                                Shipment_Date: Text(line.Res_Entry.Shipment_Date),
                                Source_ID: Text(line.Res_Entry.Source_ID),
                                Source_Ref_No: Text(line.Res_Entry.Source_Ref_No),
                                Source_SubType: Text(line.Res_Entry.Source_SubType),
                                Source_Type: Text(line.Res_Entry.Source_Type)
                            }
                        ),
                        'Sell-to_Customer_No.': Text(line.'Sell-to_Customer_No.'),
                        Type: Text(line.Type),
                        Unit_Of_Measure: Text(line.Unit_Of_Measure),
                        Unit_Price: Text(line.Unit_Price)
                    }
                ),
                {
                    Description: Text(xmlData.Sales_Line.Description),
                    Document_No: Text(xmlData.Sales_Line.Document_No),
                    Document_Type: Text(xmlData.Sales_Line.Document_Type),
                    Item_No: Text(xmlData.Sales_Line.Item_No),
                    Line_Amount: Text(xmlData.Sales_Line.Line_Amount),
                    Line_Discount_Amount: Text(xmlData.Sales_Line.Line_Discount_Amount),
                    Line_No: Text(xmlData.Sales_Line.Line_No),
                    Location_Code: Text(xmlData.Sales_Line.Location_Code),
                    Outstand_Quantity: Text(xmlData.Sales_Line.Outstand_Quantity),
                    Posting_Group: Text(xmlData.Sales_Line.Posting_Group),
                    'Qty-to_Invoice': Text(xmlData.Sales_Line.'Qty-to_Invoice'),
                    'Qty-to_Ship': Text(xmlData.Sales_Line.'Qty-to_Ship'),
                    Quantity: Text(xmlData.Sales_Line.Quantity),
                    Res_Entry: IfError(
                        ForAll(
                            xmlData.Sales_Line.Res_Entry As entry,
                            {
                                Created_By: Text(entry.Created_By),
                                Creation_Date: Text(entry.Creation_Date),
                                Entry_No: Text(entry.Entry_No),
                                Exp_Date: Text(entry.Exp_Date),
                                Exp_Receipt_Date: Text(entry.Exp_Receipt_Date),
                                Item_No: Text(entry.Item_No),
                                Item_Tracking: Text(entry.Item_Tracking),
                                LOT_No: Text(entry.LOT_No),
                                Location_Code: Text(entry.Location_Code),
                                Positive: Text(entry.Positive),
                                'Qty-to-Handle_Base': Text(entry.'Qty-to-Handle_Base'),
                                'Qty-to-Invoice_Base': Text(entry.'Qty-to-Invoice_Base'),
                                Quantity: Text(entry.Quantity),
                                Quantity_Base: Text(entry.Quantity_Base),
                                Quantity_Completed: Text(entry.Quantity_Completed),
                                Quantity_NewLOT: Text(entry.Quantity_NewLOT),
                                Res_Status: Text(entry.Res_Status),
                                Shipment_Date: Text(entry.Shipment_Date),
                                Source_ID: Text(entry.Source_ID),
                                Source_Ref_No: Text(entry.Source_Ref_No),
                                Source_SubType: Text(entry.Source_SubType),
                                Source_Type: Text(entry.Source_Type)
                            }
                        ),
                        {
                            Created_By: Text(xmlData.Sales_Line.Res_Entry.Created_By),
                            Creation_Date: Text(xmlData.Sales_Line.Res_Entry.Creation_Date),
                            Entry_No: Text(xmlData.Sales_Line.Res_Entry.Entry_No),
                            Exp_Date: Text(xmlData.Sales_Line.Res_Entry.Exp_Date),
                            Exp_Receipt_Date: Text(xmlData.Sales_Line.Res_Entry.Exp_Receipt_Date),
                            Item_No: Text(xmlData.Sales_Line.Res_Entry.Item_No),
                            Item_Tracking: Text(xmlData.Sales_Line.Res_Entry.Item_Tracking),
                            LOT_No: Text(xmlData.Sales_Line.Res_Entry.LOT_No),
                            Location_Code: Text(xmlData.Sales_Line.Res_Entry.Location_Code),
                            Positive: Text(xmlData.Sales_Line.Res_Entry.Positive),
                            'Qty-to-Handle_Base': Text(xmlData.Sales_Line.Res_Entry.'Qty-to-Handle_Base'),
                            'Qty-to-Invoice_Base': Text(xmlData.Sales_Line.Res_Entry.'Qty-to-Invoice_Base'),
                            Quantity: Text(xmlData.Sales_Line.Res_Entry.Quantity),
                            Quantity_Base: Text(xmlData.Sales_Line.Res_Entry.Quantity_Base),
                            Quantity_Completed: Text(xmlData.Sales_Line.Res_Entry.Quantity_Completed),
                            Quantity_NewLOT: Text(xmlData.Sales_Line.Quantity_NewLOT),
                            Res_Status: Text(xmlData.Sales_Line.Res_Entry.Res_Status),
                            Shipment_Date: Text(xmlData.Sales_Line.Res_Entry.Shipment_Date),
                            Source_ID: Text(xmlData.Sales_Line.Res_Entry.Source_ID),
                            Source_Ref_No: Text(xmlData.Sales_Line.Res_Entry.Source_Ref_No),
                            Source_SubType: Text(xmlData.Sales_Line.Res_Entry.Source_SubType),
                            Source_Type: Text(xmlData.Sales_Line.Res_Entry.Source_Type)
                        }
                    ),
                    'Sell-to_Customer_No.': Text(xmlData.Sales_Line.'Sell-to_Customer_No.'),
                    Type: Text(xmlData.Sales_Line.Type),
                    Unit_Of_Measure: Text(xmlData.Sales_Line.Unit_Of_Measure),
                    Unit_Price: Text(xmlData.Sales_Line.Unit_Price)
                }
            )
        );*/
        IfError(
            ForAll(
                xmlData.Sales_Line As line,
                Collect(
                    colLines,
                    {
                        Description: Text(line.Description),
                        Document_No: Text(line.Document_No),
                        Document_Type: Text(line.Document_Type),
                        Item_No: Text(line.Item_No),
                        Line_Amount: Text(line.Line_Amount),
                        Line_Discount_Amount: Text(line.Line_Discount_Amount),
                        Line_No: Text(line.Line_No),
                        Location_Code: Text(line.Location_Code),
                        Outstand_Quantity: Text(line.Outstand_Quantity),
                        Posting_Group: Text(line.Posting_Group),
                        'Qty-to_Invoice': Text(line.'Qty-to_Invoice'),
                        'Qty-to_Ship': Text(line.'Qty-to_Ship'),
                        Quantity: Text(line.Quantity),
                        'Sell-to_Customer_No.': Text(line.'Sell-to_Customer_No.'),
                        Type: Text(line.Type),
                        Unit_Of_Measure: Text(line.Unit_Of_Measure),
                        Unit_Price: Text(line.Unit_Price)
                    }
                );
                IfError(
                    ForAll(
                        line.Res_Entry As entry,
                        Collect(
                            colEntries,
                            {
                                Created_By: Text(entry.Created_By),
                                Creation_Date: Text(entry.Creation_Date),
                                Entry_No: Text(entry.Entry_No),
                                Exp_Date: Text(entry.Exp_Date),
                                Exp_Receipt_Date: Text(entry.Exp_Receipt_Date),
                                Item_No: Text(entry.Item_No),
                                Item_Tracking: Text(entry.Item_Tracking),
                                LOT_No: Text(entry.LOT_No),
                                Location_Code: Text(entry.Location_Code),
                                Positive: Text(entry.Positive),
                                'Qty-to-Handle_Base': Text(entry.'Qty-to-Handle_Base'),
                                'Qty-to-Invoice_Base': Text(entry.'Qty-to-Invoice_Base'),
                                Quantity: Text(entry.Quantity),
                                Quantity_Base: Text(entry.Quantity_Base),
                                Quantity_Completed: Text(entry.Quantity_Completed),
                                Quantity_NewLOT: Text(entry.Quantity_NewLOT),
                                Res_Status: Text(entry.Res_Status),
                                Shipment_Date: Text(entry.Shipment_Date),
                                Source_ID: Text(entry.Source_ID),
                                Source_Ref_No: Text(entry.Source_Ref_No),
                                Source_SubType: Text(entry.Source_SubType),
                                Source_Type: Text(entry.Source_Type)
                            }
                        )
                    ),
                    Collect(
                        colEntries,
                        {
                            Created_By: Text(line.Res_Entry.Created_By),
                            Creation_Date: Text(line.Res_Entry.Creation_Date),
                            Entry_No: Text(line.Res_Entry.Entry_No),
                            Exp_Date: Text(line.Res_Entry.Exp_Date),
                            Exp_Receipt_Date: Text(line.Res_Entry.Exp_Receipt_Date),
                            Item_No: Text(line.Res_Entry.Item_No),
                            Item_Tracking: Text(line.Res_Entry.Item_Tracking),
                            LOT_No: Text(line.Res_Entry.LOT_No),
                            Location_Code: Text(line.Res_Entry.Location_Code),
                            Positive: Text(line.Res_Entry.Positive),
                            'Qty-to-Handle_Base': Text(line.Res_Entry.'Qty-to-Handle_Base'),
                            'Qty-to-Invoice_Base': Text(line.Res_Entry.'Qty-to-Invoice_Base'),
                            Quantity: Text(line.Res_Entry.Quantity),
                            Quantity_Base: Text(line.Res_Entry.Quantity_Base),
                            Quantity_Completed: Text(line.Res_Entry.Quantity_Completed),
                            Quantity_NewLOT: Text(line.Res_Entry.Quantity_NewLOT),
                            Res_Status: Text(line.Res_Entry.Res_Status),
                            Shipment_Date: Text(line.Res_Entry.Shipment_Date),
                            Source_ID: Text(line.Res_Entry.Source_ID),
                            Source_Ref_No: Text(line.Res_Entry.Source_Ref_No),
                            Source_SubType: Text(line.Res_Entry.Source_SubType),
                            Source_Type: Text(line.Res_Entry.Source_Type)
                        }
                    )
                )
            ),
            Collect(
                colLines,
                {
                    Description: Text(xmlData.Sales_Line.Description),
                    Document_No: Text(xmlData.Sales_Line.Document_No),
                    Document_Type: Text(xmlData.Sales_Line.Document_Type),
                    Item_No: Text(xmlData.Sales_Line.Item_No),
                    Line_Amount: Text(xmlData.Sales_Line.Line_Amount),
                    Line_Discount_Amount: Text(xmlData.Sales_Line.Line_Discount_Amount),
                    Line_No: Text(xmlData.Sales_Line.Line_No),
                    Location_Code: Text(xmlData.Sales_Line.Location_Code),
                    Outstand_Quantity: Text(xmlData.Sales_Line.Outstand_Quantity),
                    Posting_Group: Text(xmlData.Sales_Line.Posting_Group),
                    'Qty-to_Invoice': Text(xmlData.Sales_Line.'Qty-to_Invoice'),
                    'Qty-to_Ship': Text(xmlData.Sales_Line.'Qty-to_Ship'),
                    Quantity: Text(xmlData.Sales_Line.Quantity),
                    'Sell-to_Customer_No.': Text(xmlData.Sales_Line.'Sell-to_Customer_No.'),
                    Type: Text(xmlData.Sales_Line.Type),
                    Unit_Of_Measure: Text(xmlData.Sales_Line.Unit_Of_Measure),
                    Unit_Price: Text(xmlData.Sales_Line.Unit_Price)
                }
            );
            IfError(
                ForAll(
                    xmlData.Sales_Line.Res_Entry As entry,
                    Collect(
                        colEntries,
                        {
                            Created_By: Text(entry.Created_By),
                            Creation_Date: Text(entry.Creation_Date),
                            Entry_No: Text(entry.Entry_No),
                            Exp_Date: Text(entry.Exp_Date),
                            Exp_Receipt_Date: Text(entry.Exp_Receipt_Date),
                            Item_No: Text(entry.Item_No),
                            Item_Tracking: Text(entry.Item_Tracking),
                            LOT_No: Text(entry.LOT_No),
                            Location_Code: Text(entry.Location_Code),
                            Positive: Text(entry.Positive),
                            'Qty-to-Handle_Base': Text(entry.'Qty-to-Handle_Base'),
                            'Qty-to-Invoice_Base': Text(entry.'Qty-to-Invoice_Base'),
                            Quantity: Text(entry.Quantity),
                            Quantity_Base: Text(entry.Quantity_Base),
                            Quantity_Completed: Text(entry.Quantity_Completed),
                            Quantity_NewLOT: Text(entry.Quantity_NewLOT),
                            Res_Status: Text(entry.Res_Status),
                            Shipment_Date: Text(entry.Shipment_Date),
                            Source_ID: Text(entry.Source_ID),
                            Source_Ref_No: Text(entry.Source_Ref_No),
                            Source_SubType: Text(entry.Source_SubType),
                            Source_Type: Text(entry.Source_Type)
                        }
                    )
                ),
                Collect(
                    colEntries,
                    {
                        Created_By: Text(xmlData.Sales_Line.Res_Entry.Created_By),
                        Creation_Date: Text(xmlData.Sales_Line.Res_Entry.Creation_Date),
                        Entry_No: Text(xmlData.Sales_Line.Res_Entry.Entry_No),
                        Exp_Date: Text(xmlData.Sales_Line.Res_Entry.Exp_Date),
                        Exp_Receipt_Date: Text(xmlData.Sales_Line.Res_Entry.Exp_Receipt_Date),
                        Item_No: Text(xmlData.Sales_Line.Res_Entry.Item_No),
                        Item_Tracking: Text(xmlData.Sales_Line.Res_Entry.Item_Tracking),
                        LOT_No: Text(xmlData.Sales_Line.Res_Entry.LOT_No),
                        Location_Code: Text(xmlData.Sales_Line.Res_Entry.Location_Code),
                        Positive: Text(xmlData.Sales_Line.Res_Entry.Positive),
                        'Qty-to-Handle_Base': Text(xmlData.Sales_Line.Res_Entry.'Qty-to-Handle_Base'),
                        'Qty-to-Invoice_Base': Text(xmlData.Sales_Line.Res_Entry.'Qty-to-Invoice_Base'),
                        Quantity: Text(xmlData.Sales_Line.Res_Entry.Quantity),
                        Quantity_Base: Text(xmlData.Sales_Line.Res_Entry.Quantity_Base),
                        Quantity_Completed: Text(xmlData.Sales_Line.Res_Entry.Quantity_Completed),
                        Quantity_NewLOT: Text(xmlData.Sales_Line.Quantity_NewLOT),
                        Res_Status: Text(xmlData.Sales_Line.Res_Entry.Res_Status),
                        Shipment_Date: Text(xmlData.Sales_Line.Res_Entry.Shipment_Date),
                        Source_ID: Text(xmlData.Sales_Line.Res_Entry.Source_ID),
                        Source_Ref_No: Text(xmlData.Sales_Line.Res_Entry.Source_Ref_No),
                        Source_SubType: Text(xmlData.Sales_Line.Res_Entry.Source_SubType),
                        Source_Type: Text(xmlData.Sales_Line.Res_Entry.Source_Type)
                    }
                )
            )
        );
        /*
        If(!IsBlank(SelectedFile),
            IfError(
                GetXML_Nalog_Za_Prodaju.Run(
                    SelectedFile,
                    SelectedFolder
                ),
                Notify(
                    "Error occurred while Get request, check if file exists.",
                    NotificationType.Error,
                    5000
                ),
                UpdateContext({
                    sales:
                    GetXML_Nalog_Za_Prodaju.Run(
                        SelectedFile,
                        SelectedFolder
                    )
                })
            );
            UpdateContext({
                sales_header:
                ParseJSON(sales.sales_header)
            });
            UpdateContext({
                sales_lines:
                sales.sales_line
            });
            UpdateContext({
                salesResEntry:
                sales.res_entry
            });
            Clear(colSalesLines);
            Clear(colSalesResEntries);
            ForAll(
                ParseJSON(sales_lines),
                Collect(
                    colSalesLines,
                    {
                        Document_Type: Value(ThisRecord.Document_Type),
                        'Sell-to_Customer_No.': Text(ThisRecord.'Sell-to_Customer_No.'),
                        Document_No: Text(ThisRecord.Document_No),
                        Line_No: Value(ThisRecord.Line_No),
                        Type: Value(ThisRecord.Type),
                        Item_No: Text(ThisRecord.Item_No),
                        Location_Code: Text(ThisRecord.Location_Code),
                        Posting_Group: Text(ThisRecord.Posting_Group),
                        Description: Text(ThisRecord.Description),
                        Unit_Of_Measure: Text(ThisRecord.Unit_Of_Measure),
                        Quantity: Value(ThisRecord.Quantity),
                        Unit_Price: Value(ThisRecord.Unit_Price),
                        Line_Amount: Value(ThisRecord.Line_Amount),
                        Line_Discount_Amount: Value(ThisRecord.Line_Discount_Amount),
                        'Qty-to_Invoice': Value(ThisRecord.'Qty-to_Invoice'),
                        'Qty-to_Ship': Value(ThisRecord.'Qty-to_Ship'),
                        Outstand_Quantity: Value(ThisRecord.Outstand_Quantity)
                    }
                );
            );
            ForAll(
                ParseJSON(salesResEntry),
                Collect(
                    colSalesResEntries,
                    {
                        Entry_No: Text(ThisRecord.Entry_No),
                            Item_No: Text(ThisRecord.Item_No),
                            Positive: Text(ThisRecord.Positive),
                            Quantity: Value(ThisRecord.Quantity),
                            Quantity_Base: Value(ThisRecord.Quantity_Base),
                            Location_Code: Text(ThisRecord.Location_Code),
                            Res_Status: Text(ThisRecord.Res_Status),
                            Source_Type: Text(ThisRecord.Source_Type),
                            Source_SubType: Text(ThisRecord.Source_SubType),
                            Source_ID: Text(ThisRecord.Source_ID),
                            Source_Ref_No: Text(ThisRecord.Source_Ref_No),
                            Item_Tracking: Text(ThisRecord.Item_Tracking),
                            LOT_No: Text(ThisRecord.LOT_No),
                            Exp_Date: Text(ThisRecord.Exp_Date),
                            Creation_Date: Text(ThisRecord.Creation_Date),
                            Exp_Receipt_Date: Text(ThisRecord.Exp_Receipt_Date),
                            Shipment_Date: Text(ThisRecord.Shipment_Date),
                            Created_By: Text(ThisRecord.Created_By),
                            'Qty-to-Handle_Base': Value(ThisRecord.'Qty-to-Handle_Base'),
                            'Qty-to-Invoice_Base': Value(ThisRecord.'Qty-to-Invoice_Base')
                        }            
                )
            );
        );*/
        Set(
            isLoading,
            false
        );
        If(
            SelectedFolder = ReadyForProcessing,
            ChangeXmlStatus.Run(
                SelectedFile,
                SelectedFolder,
                InProgress
            );
            Set(
                SelectedFolder,
                InProgress
            )
        );
        UpdateContext({wizardStep: 1});

    vrt_Pro As groupContainer.verticalAutoLayoutContainer:
        DropShadow: =DropShadow.Light
        Fill: =RGBA(245, 245, 245, 1)
        Height: =Parent.Height
        LayoutAlignItems: =LayoutAlignItems.Stretch
        LayoutDirection: =LayoutDirection.Vertical
        LayoutGap: =5
        LayoutMode: =LayoutMode.Auto
        RadiusBottomLeft: =4
        RadiusBottomRight: =4
        RadiusTopLeft: =4
        RadiusTopRight: =4
        Width: =Parent.Width
        ZIndex: =1

        hdr_ProHeader As Header:
            BasePaletteColor: =
            DisplayMode: =DisplayMode.Edit
            FontColor: =
            Height: =75
            LayoutMinHeight: =75
            LayoutMinWidth: =Parent.Width
            Logo: =FFLogo
            OnSelectLogo: =Navigate(scr_Entry)
            Style: ='Header.Style'.Primary
            Title: ="NALOG ZA PRODAJU"
            TitleFontSize: =20
            UserEmail: =User().Email
            UserImage: =User().Image
            UserName: =User().FullName
            Width: =Parent.Width
            X: =0
            Y: =0
            ZIndex: =1

        btn_ProBack As Button:
            AlignInContainer: =AlignInContainer.Start
            Appearance: ='ButtonCanvas.Appearance'.Transparent
            DisplayMode: =DisplayMode.Edit
            Height: =32
            Icon: ="ArrowLeft"
            IconStyle: ='ButtonCanvas.IconStyle'.Filled
            LayoutMinHeight: =32
            LayoutMinWidth: =96
            OnSelect: =Navigate(scr_Entry,ScreenTransition.Fade);
            Text: ="Nazad na početnu"
            Width: =170
            X: =0
            Y: =0
            ZIndex: =2

        vrt_ProHeader As groupContainer.verticalAutoLayoutContainer:
            DropShadow: =DropShadow.Light
            FillPortions: =0
            Height: =100
            LayoutAlignItems: =LayoutAlignItems.Stretch
            LayoutDirection: =LayoutDirection.Vertical
            LayoutGap: =5
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            LayoutOverflowY: =LayoutOverflow.Scroll
            PaddingLeft: =15
            PaddingRight: =15
            RadiusBottomLeft: =4
            RadiusBottomRight: =4
            RadiusTopLeft: =4
            RadiusTopRight: =4
            Visible: =!isLoading
            ZIndex: =3

            txt_ProNo As Text:
                AutoHeight: =true
                DisplayMode: =DisplayMode.Edit
                Height: =32
                LayoutMinHeight: =32
                LayoutMinWidth: =96
                Text: |-
                    ="Broj naloga :   " & header.'No.'
                Width: =96
                X: =0
                Y: =0
                ZIndex: =1

            txt_ProDocumentDate As Text:
                AutoHeight: =true
                DisplayMode: =DisplayMode.Edit
                Height: =32
                LayoutMinHeight: =32
                LayoutMinWidth: =96
                Text: |-
                    ="Datum dokumenta :   " & header.Document_Date
                Width: =96
                X: =0
                Y: =0
                ZIndex: =2

            txt_ProBillToName As Text:
                AutoHeight: =true
                DisplayMode: =DisplayMode.Edit
                Height: =32
                LayoutMinHeight: =32
                LayoutMinWidth: =96
                Text: |-
                    ="Kupac :   " & header.'Bill-to_Name'
                Width: =96
                X: =0
                Y: =0
                ZIndex: =3

            txt_ProOrderDate As Text:
                AutoHeight: =true
                DisplayMode: =DisplayMode.Edit
                Height: =32
                LayoutMinHeight: =32
                LayoutMinWidth: =96
                Text: |-
                    ="Datum narudžbe :   " & header.Order_Date
                Width: =96
                X: =0
                Y: =0
                ZIndex: =4

            txt_ProPostingDate As Text:
                AutoHeight: =true
                DisplayMode: =DisplayMode.Edit
                Height: =32
                LayoutMinHeight: =32
                LayoutMinWidth: =96
                Text: |-
                    ="Datum knjiženja :   " & header.Posting_Date
                Width: =96
                X: =0
                Y: =0
                ZIndex: =5

        spn_ProLoader As Spinner:
            BasePaletteColor: =
            DisplayMode: =DisplayMode.Edit
            FillPortions: =1
            FontColor: =
            Height: =200
            LayoutMinHeight: =200
            LayoutMinWidth: =200
            SpinnerSize: ='Spinner.SpinnerSize'.Huge
            Visible: =isLoading
            Width: =200
            X: =0
            Y: =0
            ZIndex: =5

        Container2_4 As groupContainer.horizontalAutoLayoutContainer:
            BorderColor: =RGBA(214, 221, 224, 1)
            FillPortions: =0
            Height: =49
            LayoutAlignItems: =LayoutAlignItems.Center
            LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            PaddingLeft: =10
            PaddingRight: =10
            RadiusBottomLeft: =4
            RadiusBottomRight: =4
            RadiusTopLeft: =4
            RadiusTopRight: =4
            Visible: =If(!isLoading, wizardStep = 1)
            Width: =Max(App.Width, App.MinScreenWidth)
            ZIndex: =6

            TextCanvas5 As Text:
                AutoHeight: =true
                DisplayMode: =DisplayMode.Edit
                FillPortions: =1
                Height: =32
                LayoutMinHeight: =32
                LayoutMinWidth: =96
                Size: =20
                Text: ="Stavke prodaje"
                VerticalAlign: ='TextCanvas.VerticalAlign'.Middle
                Width: =96
                X: =0
                Y: =0
                ZIndex: =1

            "BarcodeReader1_2 As 'Barcode Reader'":
                BarcodeType: ='BarcodeReader.BarcodeType'.Code128
                BorderFillColor: =RGBA(0, 0, 0, 1)
                BorderRadius: =10
                BorderThickness: =1
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledContentColor: =RGBA(166, 166, 166, 1)
                DisabledFillColor: =RGBA(244, 244, 244, 1)
                DisplayMode: =DisplayMode.Edit
                FillColor: =RGBA(255, 255, 255, 1)
                FontSize: =12
                Height: =25
                HoverBorderColor: =RGBA(189, 49, 51, 1)
                HoverContentColor: =RGBA(255, 255, 255, 1)
                HoverFillColor: =RGBA(189, 49, 51, 1)
                LayoutMinHeight: =70
                LayoutMinWidth: =280
                OnCancel: =false
                OnScan: |-
                    =UpdateContext({
                        scannedItem:First(BarcodeReader1_2.Barcodes).Value
                    })
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                PressedBorderColor: =RGBA(189, 49, 51, 1)
                PressedContentColor: =RGBA(189, 49, 51, 1)
                PressedFillColor: =RGBA(255, 255, 255, 1)
                ScanningMode: ='BarcodeReader.ScanningMode'.SelectToScan
                Text: ="Skener"
                TextAlignment: =Align.Justify
                TextColor: =RGBA(0, 0, 0, 1)
                Visible: =isMobile
                Width: =80
                X: =164
                Y: =9
                ZIndex: =3

        "glr_ProLines As gallery.'BrowseLayout_Vertical_ThreeTextVariant_ver5.0'":
            BorderColor: =App.Theme.Colors.Darker40
            Default: =First(Filter(colLines, Line_No = scannedItem))
            DelayItemLoading: =true
            Fill: =RGBA(237, 237, 237, 1)
            Height: =562
            Items: =colLines
            Layout: =Layout.Vertical
            LayoutMinHeight: =287
            LayoutMinWidth: =320
            LoadingSpinner: =LoadingSpinner.Data
            OnSelect: |-
                =UpdateContext({wizardStep:2});
            TemplatePadding: =0
            TemplateSize: =164
            Visible: =If(!isLoading, wizardStep = 1)
            Width: =Parent.Width
            Y: =49
            ZIndex: =7

            Separator6_4 As rectangle:
                BorderColor: =App.Theme.Colors.Darker40
                Fill: =RGBA(255, 255, 255, 1)
                Height: =8
                OnSelect: =Select(Parent)
                Width: =Parent.TemplateWidth
                Y: =Parent.TemplateHeight - Self.Height
                ZIndex: =5

            Rectangle5_5 As rectangle:
                BorderColor: =App.Theme.Colors.Darker40
                Fill: =App.Theme.Colors.Darker30
                Height: =Parent.TemplateHeight - Separator6_4.Height
                OnSelect: =Select(Parent)
                Visible: =ThisItem.IsSelected
                Width: =1
                ZIndex: =6

            Group2_2 As group:
                Height: =5
                Width: =5
                X: =40
                Y: =40
                ZIndex: =14

                Title5_4 As label:
                    Color: =RGBA(50, 49, 48, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =22
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =20
                    PaddingRight: =20
                    PaddingTop: =0
                    Size: =12
                    Text: |-
                        ="Br. artikla:   " & ThisItem.Item_No
                    VerticalAlign: =VerticalAlign.Top
                    Width: =Parent.Width
                    Y: =18
                    ZIndex: =1

                Subtitle4_2 As label:
                    Color: =RGBA(0, 0, 0, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =22
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =20
                    PaddingRight: =20
                    PaddingTop: =0
                    Size: =12
                    Text: |-
                        ="Naziv artikla:   " & ThisItem.Description
                    VerticalAlign: =VerticalAlign.Top
                    Width: =Parent.Width
                    Y: =52
                    ZIndex: =2

                Body1_13 As label:
                    Color: =RGBA(0, 0, 0, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =18
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =20
                    PaddingRight: =20
                    PaddingTop: =0
                    Size: =12
                    Text: |-
                        ="Količina za slanje:    " & ThisItem.'Qty-to_Ship'
                    VerticalAlign: =VerticalAlign.Top
                    Width: =Parent.Width
                    Y: =121
                    ZIndex: =3

                Body1_12 As label:
                    Color: =RGBA(0, 0, 0, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =22
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =20
                    PaddingRight: =20
                    PaddingTop: =0
                    Size: =12
                    Text: |-
                        ="Količina:    " & ThisItem.Quantity
                    VerticalAlign: =VerticalAlign.Top
                    Width: =Parent.Width
                    Y: =87
                    ZIndex: =10

        Container2_5 As groupContainer.horizontalAutoLayoutContainer:
            FillPortions: =0
            Height: =49
            LayoutAlignItems: =LayoutAlignItems.Center
            LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            PaddingLeft: =5
            PaddingRight: =5
            RadiusBottomLeft: =4
            RadiusBottomRight: =4
            RadiusTopLeft: =4
            RadiusTopRight: =4
            Visible: =If(!isLoading, wizardStep = 2)
            Width: =Max(App.Width, App.MinScreenWidth)
            ZIndex: =8

            ButtonCanvas8 As Button:
                Appearance: ='ButtonCanvas.Appearance'.Transparent
                DisplayMode: =DisplayMode.Edit
                FontSize: =24
                Height: =32
                Icon: ="ArrowLeft"
                IconStyle: ='ButtonCanvas.IconStyle'.Filled
                Layout: ='ButtonCanvas.Layout'.IconOnly
                LayoutMinHeight: =32
                LayoutMinWidth: =96
                OnSelect: |-
                    =UpdateContext({wizardStep: 1})
                Text: ="Rezervacijski unosi"
                Width: =30
                X: =0
                Y: =0
                ZIndex: =3

            TextCanvas8 As Text:
                Align: ='TextCanvas.Align'.Start
                AutoHeight: =true
                DisplayMode: =DisplayMode.Edit
                FillPortions: =1
                Height: =20
                LayoutMinHeight: =32
                LayoutMinWidth: =96
                Size: =20
                Text: ="Rezervacijski unosi"
                VerticalAlign: ='TextCanvas.VerticalAlign'.Middle
                Width: =96
                Wrap: =true
                X: =0
                Y: =0
                ZIndex: =4

        "glr_ProResEntries As gallery.'BrowseLayout_Vertical_ThreeTextVariant_ver5.0'":
            BorderColor: =App.Theme.Colors.Darker40
            DelayItemLoading: =true
            Fill: =RGBA(237, 237, 237, 1)
            Height: =560
            Items: =Filter(colEntries, Source_Ref_No = glr_ProLines.Selected.Line_No)
            Layout: =Layout.Vertical
            LayoutMinHeight: =287
            LayoutMinWidth: =320
            LoadingSpinner: =LoadingSpinner.Data
            OnSelect: |
                =Set(
                    isModalOpen,
                    true
                );
                UpdateContext({quantityCompleted: Abs(Value(glr_ProResEntries.Selected.Quantity_Completed))});
            TemplatePadding: =0
            TemplateSize: =244
            Visible: =If(!isLoading, wizardStep = 2)
            Width: =Parent.Width
            Y: =49
            ZIndex: =9

            Separator6_5 As rectangle:
                BorderColor: =App.Theme.Colors.Darker40
                Fill: =RGBA(255, 255, 255, 1)
                Height: =8
                OnSelect: =Select(Parent)
                Width: =Parent.TemplateWidth
                Y: =Parent.TemplateHeight - Self.Height
                ZIndex: =5

            Rectangle5_12 As rectangle:
                BorderColor: =App.Theme.Colors.Darker40
                Fill: =App.Theme.Colors.Darker30
                Height: =Parent.TemplateHeight - Separator6_5.Height
                OnSelect: =Select(Parent)
                Visible: =ThisItem.IsSelected
                Width: =4
                ZIndex: =6

            Group6 As group:
                Height: =5
                Width: =5
                X: =40
                Y: =40
                ZIndex: =34

                Body1_15 As label:
                    Color: =RGBA(0, 0, 0, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =18
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =12
                    Text: |-
                        ="Količina:    "
                    VerticalAlign: =VerticalAlign.Top
                    Width: =88
                    X: =18
                    Y: =50
                    ZIndex: =18

                Body1_16 As label:
                    Color: =RGBA(0, 0, 0, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =Self.Size * 1.8
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =12
                    Text: |-
                        ="Rezervisana količina:    "
                    VerticalAlign: =VerticalAlign.Top
                    Width: =120
                    X: =18
                    Y: =87
                    ZIndex: =19

                Body1_17 As label:
                    Color: =RGBA(0, 0, 0, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =19
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =12
                    Text: |-
                        ="Potrebna količina:    "
                    VerticalAlign: =VerticalAlign.Top
                    Width: =166
                    X: =18
                    Y: =123
                    ZIndex: =20

                Body1_32 As label:
                    Color: =RGBA(0, 0, 0, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =19
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =12
                    Text: =ThisItem.Quantity
                    VerticalAlign: =VerticalAlign.Top
                    Width: =158
                    X: =184
                    Y: =49
                    ZIndex: =24

                Body1_33 As label:
                    Color: =RGBA(0, 0, 0, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =19
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =12
                    Text: =ThisItem.Quantity_Completed
                    VerticalAlign: =VerticalAlign.Top
                    Width: =158
                    X: =184
                    Y: =87
                    ZIndex: =25

                Body1_34 As label:
                    Color: =RGBA(0, 0, 0, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =19
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =12
                    Text: =ThisItem.Quantity_NewLOT
                    VerticalAlign: =VerticalAlign.Top
                    Width: =158
                    X: =184
                    Y: =123
                    ZIndex: =26

                Body1_35 As label:
                    Color: =RGBA(0, 0, 0, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =19
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =12
                    Text: =ThisItem.Entry_No
                    VerticalAlign: =VerticalAlign.Top
                    Width: =158
                    X: =184
                    Y: =16
                    ZIndex: =27

                Body1_36 As label:
                    Color: =RGBA(0, 0, 0, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =18
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =12
                    Text: |-
                        ="Br. artikla:    "
                    VerticalAlign: =VerticalAlign.Top
                    Width: =88
                    X: =18
                    Y: =16
                    ZIndex: =28

                Body1_37 As label:
                    Color: =RGBA(0, 0, 0, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =Self.Size * 1.8
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =12
                    Text: |-
                        ="Rok trajanja:    "
                    VerticalAlign: =VerticalAlign.Top
                    Width: =120
                    X: =18
                    Y: =158
                    ZIndex: =29

                Body1_38 As label:
                    Color: =RGBA(0, 0, 0, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =Self.Size * 1.8
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =12
                    Text: |-
                        ="LOT:    " & ThisItem.LOT_No
                    VerticalAlign: =VerticalAlign.Top
                    Width: =60
                    X: =18
                    Y: =196
                    ZIndex: =30

                Body1_39 As label:
                    Color: =RGBA(0, 0, 0, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =19
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =12
                    Text: =If(IsBlank(ThisItem.Exp_Date), "//",ThisItem.Exp_Date)
                    VerticalAlign: =VerticalAlign.Top
                    Width: =158
                    X: =184
                    Y: =158
                    ZIndex: =31

                Body1_40 As label:
                    Color: =RGBA(0, 0, 0, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =19
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =12
                    Text: =ThisItem.LOT_No
                    VerticalAlign: =VerticalAlign.Top
                    Width: =158
                    X: =184
                    Y: =196
                    ZIndex: =32

                Body1_41 As label:
                    Color: =RGBA(0, 0, 0, 1)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    Font: =App.Theme.Font
                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                    Height: =19
                    OnSelect: =Select(Parent)
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =12
                    Text: =If(IsBlank(ThisItem.Quantity_NewLOT), 0, ThisItem.Quantity_NewLOT)
                    VerticalAlign: =VerticalAlign.Top
                    Width: =158
                    X: =184
                    Y: =123
                    ZIndex: =33

        hrz_ProFooter As groupContainer.horizontalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            BorderColor: =RGBA(233, 79, 76, 1)
            DropShadow: =DropShadow.Light
            Fill: =RGBA(237, 237, 237, 1)
            FillPortions: =0
            Height: =50
            LayoutAlignItems: =LayoutAlignItems.Center
            LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
            LayoutMinHeight: =50
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            PaddingLeft: =15
            PaddingRight: =20
            RadiusBottomLeft: =4
            RadiusBottomRight: =4
            RadiusTopLeft: =4
            RadiusTopRight: =4
            Width: =Max(App.Width, App.MinScreenWidth)
            ZIndex: =10

            hrz_ProCheckboxes As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                Height: =Parent.Height
                LayoutAlignItems: =LayoutAlignItems.Center
                LayoutMinHeight: =50
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                RadiusBottomLeft: =4
                RadiusBottomRight: =4
                RadiusTopLeft: =4
                RadiusTopRight: =4
                Width: =Parent.Width
                ZIndex: =1

                chb_ProDorada As Checkbox:
                    BasePaletteColor: =RGBA(249, 83, 109, 1)
                    CheckboxSize: =16
                    Checked: =
                    DisplayMode: =If(!isLoading, DisplayMode.Edit, DisplayMode.Disabled)
                    FontColor: =
                    FontSize: =14
                    FontWeight: =FontWeight.Bold
                    Height: =Parent.Height
                    Label: ="Dorada"
                    LayoutMinHeight: =32
                    LayoutMinWidth: =160
                    OnCheck: =
                    OnUncheck: =
                    Width: =110
                    X: =40
                    Y: =0
                    ZIndex: =1

                chb_ProReadyForNav As Checkbox:
                    BasePaletteColor: =RGBA(249, 83, 109, 1)
                    CheckboxSize: =16
                    Checked: =
                    DisplayMode: =If(!isLoading, DisplayMode.Edit, DisplayMode.Disabled)
                    FontColor: =
                    FontSize: =14
                    FontWeight: =FontWeight.Bold
                    Height: =Parent.Height
                    Label: ="NAV"
                    LayoutMinHeight: =32
                    LayoutMinWidth: =160
                    OnCheck: =
                    OnUncheck: =
                    Width: =80
                    X: =40
                    Y: =0
                    ZIndex: =2

            btn_ProSave As Button:
                BasePaletteColor: =
                DisplayMode: =If(isLoading, DisplayMode.Disabled, DisplayMode.Edit)
                Height: =32
                Layout: ='ButtonCanvas.Layout'.TextOnly
                LayoutMinHeight: =32
                LayoutMinWidth: =96
                OnSelect: |
                    =Set(
                        isLoading,
                        true
                    );
                    IfError(
                        GetXml.Run(
                            SelectedFile,
                            ReadyForProcessing
                        ),
                        IfError(
                            UpdateXML.Run(
                                "{" & Char(34) & "Sales_Header" & Char(34) & ": " & JSON(
                                    AddColumns(
                                        header,
                                        Sales_Line,
                                        ForAll(
                                            colLines As line,
                                            AddColumns(
                                                line,
                                                Res_Entry,
                                                Filter(
                                                    colEntries,
                                                    ThisRecord.Source_Ref_No = line.Line_No
                                                )
                                            )
                                        )
                                    )
                                ) & "}",
                                SelectedFile,
                                SelectedFolder
                            ),
                            Notify(
                                "Došlo je do greške!",
                                NotificationType.Error,
                                2000
                            ),
                            Notify(
                                "Uspješno ažuriranje!",
                                NotificationType.Success,
                                2000
                            );
                            If(
                                chb_ProReadyForNav.Checked,
                                ChangeXmlStatus.Run(
                                    SelectedFile,
                                    SelectedFolder,
                                    ReadyForNAVProcessing
                                );
                                Navigate(
                                    scr_Entry,
                                    ScreenTransition.Fade
                                ),
                                If(
                                    chb_ProDorada.Checked,
                                    ChangeXmlStatus.Run(
                                        SelectedFile,
                                        SelectedFolder,
                                        NAVChanges
                                    );
                                    Navigate(
                                        scr_Entry,
                                        ScreenTransition.Fade
                                    ),
                                    Navigate(
                                        scr_XMLNalogZaProdaju,
                                        ScreenTransition.Fade
                                    )
                                )
                            );
                        ),
                        Set(
                            SelectedFolder,
                            ReadyForProcessing
                        );
                        Notify(
                            "Postoje izmjene u ovom fajlu.",
                            NotificationType.Information,
                            2000
                        );
                        Navigate(
                            scr_XMLNalogZaProdaju,
                            ScreenTransition.Fade
                        )
                    );
                    Set(
                        isLoading,
                        false
                    );
                Text: ="Sačuvaj"
                Width: =96
                X: =0
                Y: =0
                ZIndex: =3

    con_ProModalFade As groupContainer.manualLayoutContainer:
        DropShadow: =DropShadow.Light
        Fill: =RGBA(0, 0, 0, 50%)
        Height: =Parent.Height
        RadiusBottomLeft: =4
        RadiusBottomRight: =4
        RadiusTopLeft: =4
        RadiusTopRight: =4
        Visible: =isModalOpen
        Width: |
            =Parent.Width
        ZIndex: =2

        con_ProModal As groupContainer.manualLayoutContainer:
            DropShadow: =DropShadow.ExtraBold
            Fill: =RGBA(255, 255, 255, 1)
            Height: =Parent.Height * 80%
            RadiusBottomLeft: =4
            RadiusBottomRight: =4
            RadiusTopLeft: =4
            RadiusTopRight: =4
            Width: =Parent.Width * 75%
            X: =(Parent.Width - Self.Width) / 2
            Y: =(Parent.Height - Self.Height) / 2
            ZIndex: =1

            vrt_ProModal As groupContainer.verticalAutoLayoutContainer:
                DropShadow: =DropShadow.ExtraBold
                Height: =Parent.Height
                LayoutAlignItems: =LayoutAlignItems.Stretch
                LayoutDirection: =LayoutDirection.Vertical
                LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                LayoutMode: =LayoutMode.Auto
                RadiusBottomLeft: =4
                RadiusBottomRight: =4
                RadiusTopLeft: =4
                RadiusTopRight: =4
                Width: =Parent.Width
                ZIndex: =1

                Header2_1 As Header:
                    DisplayMode: =DisplayMode.Edit
                    Height: =55
                    IsLogoVisible: =false
                    IsProfilePictureVisible: =false
                    LayoutMinHeight: =75
                    LayoutMinWidth: =Parent.Width
                    LogoTooltip: =
                    OnSelectLogo: =false
                    Style: ='Header.Style'.Primary
                    Title: ="Unesite podatke"
                    TitleFontSize: =15
                    UserEmail: =User().Email
                    UserImage: =User().Image
                    UserName: =User().FullName
                    Visible: =true
                    Width: =Parent.Width
                    X: =0
                    Y: =0
                    ZIndex: =1

                Container11_1 As groupContainer.verticalAutoLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    DropShadow: =DropShadow.Light
                    FillPortions: =3
                    LayoutAlignItems: =LayoutAlignItems.Stretch
                    LayoutDirection: =LayoutDirection.Vertical
                    LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    PaddingBottom: =15
                    PaddingLeft: =15
                    PaddingRight: =15
                    PaddingTop: =15
                    RadiusBottomLeft: =4
                    RadiusBottomRight: =4
                    RadiusTopLeft: =4
                    RadiusTopRight: =4
                    ZIndex: =2

                    Container13_3 As groupContainer.verticalAutoLayoutContainer:
                        AlignInContainer: =AlignInContainer.SetByContainer
                        Height: =70
                        LayoutAlignItems: =LayoutAlignItems.Stretch
                        LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                        LayoutMinHeight: =30
                        LayoutMinWidth: =250
                        LayoutMode: =LayoutMode.Auto
                        PaddingBottom: =15
                        PaddingTop: =15
                        RadiusBottomLeft: =4
                        RadiusBottomRight: =4
                        RadiusTopLeft: =4
                        RadiusTopRight: =4
                        ZIndex: =1

                        TextCanvas3_3 As Text:
                            AlignInContainer: =AlignInContainer.Center
                            AutoHeight: =true
                            DisplayMode: =DisplayMode.Edit
                            Height: =32
                            LayoutMinHeight: =32
                            LayoutMinWidth: =96
                            Text: ="Količina"
                            Width: =96
                            X: =40
                            Y: =40
                            ZIndex: =1

                        "inp_Quantity_1 As 'Text input'":
                            Align: ='TextInputCanvas.Align'.End
                            AlignInContainer: =AlignInContainer.Center
                            BasePaletteColor: =
                            DisplayMode: =DisplayMode.Disabled
                            FontSize: =12
                            Height: =32
                            LayoutMinHeight: =32
                            LayoutMinWidth: =320
                            OnChange: =
                            Placeholder: ="Količina"
                            Value: =Abs(glr_ProResEntries.Selected.Quantity)
                            Width: =150
                            X: =40
                            Y: =40
                            ZIndex: =2

                    Container13_7 As groupContainer.verticalAutoLayoutContainer:
                        LayoutAlignItems: =LayoutAlignItems.Stretch
                        LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                        LayoutMinHeight: =30
                        LayoutMinWidth: =250
                        LayoutMode: =LayoutMode.Auto
                        PaddingBottom: =15
                        PaddingRight: =15
                        PaddingTop: =15
                        RadiusBottomLeft: =4
                        RadiusBottomRight: =4
                        RadiusTopLeft: =4
                        RadiusTopRight: =4
                        ZIndex: =2

                        TextCanvas3_7 As Text:
                            AlignInContainer: =AlignInContainer.Center
                            AutoHeight: =true
                            DisplayMode: =DisplayMode.Edit
                            Height: =32
                            LayoutMinHeight: =32
                            LayoutMinWidth: =80
                            Size: =20
                            Text: ="Rezervisano"
                            Width: =120
                            X: =40
                            Y: =40
                            ZIndex: =1

                        "inp_rezQty As 'Text input'":
                            Align: ='TextInputCanvas.Align'.Center
                            AlignInContainer: =AlignInContainer.Center
                            Appearance: ='TextInputCanvas.Appearance'.Outline
                            BasePaletteColor: =
                            DisplayMode: =DisplayMode.Edit
                            FontSize: =0
                            Height: =32
                            LayoutMinHeight: =32
                            LayoutMinWidth: =320
                            OnChange: |
                                =If(
                                    (!IsNumeric(inp_rezQty.Value) && !IsBlank(inp_rezQty.Value)) || Value(inp_rezQty.Value) < 0,
                                    Notify(
                                        "Unesite pozitivan broj.",
                                        NotificationType.Error,
                                        2000
                                    );
                                    Reset(inp_rezQty);
                                    UpdateContext({potrebnaKolicina: 0}),
                                    If(
                                        Value(inp_rezQty.Value) > Abs(glr_ProResEntries.Selected.Quantity_Completed),
                                        Reset(inp_rezQty);
                                        UpdateContext({potrebnaKolicina: 0});
                                        Notify(
                                            "Maksimalna količina za isporuku je " & Abs(glr_ProResEntries.Selected.Quantity_Completed),
                                            NotificationType.Information,
                                            2000
                                        ),
                                        UpdateContext({potrebnaKolicina: Abs(glr_ProResEntries.Selected.Quantity) - inp_rezQty.Value})
                                    )
                                );
                            Placeholder: ="Unesite LOT"
                            Required: =true
                            Type: ="Text"
                            Value: =quantityCompleted
                            Visible: =true
                            Width: =150
                            X: =40
                            Y: =40
                            ZIndex: =3

                        Container8 As groupContainer.verticalAutoLayoutContainer:
                            FillPortions: =0
                            LayoutAlignItems: =LayoutAlignItems.Center
                            LayoutDirection: =LayoutDirection.Vertical
                            LayoutGap: =5
                            LayoutJustifyContent: =LayoutJustifyContent.Center
                            LayoutMinHeight: =100
                            LayoutMinWidth: =250
                            LayoutMode: =LayoutMode.Auto
                            RadiusBottomLeft: =4
                            RadiusBottomRight: =4
                            RadiusTopLeft: =4
                            RadiusTopRight: =4
                            Width: =100
                            ZIndex: =4

                            ButtonCanvas9 As Button:
                                DisplayMode: =DisplayMode.Edit
                                FillPortions: =1
                                FontSize: =60
                                Height: =32
                                Icon: ="ChevronUp"
                                Layout: ='ButtonCanvas.Layout'.IconOnly
                                LayoutMinHeight: =32
                                LayoutMinWidth: =96
                                OnSelect: |-
                                    =UpdateContext({quantityCompleted: quantityCompleted + 1})
                                Width: =96
                                X: =0
                                Y: =0
                                ZIndex: =1

                            ButtonCanvas9_1 As Button:
                                DisplayMode: =DisplayMode.Edit
                                FillPortions: =1
                                FontSize: =60
                                Height: =32
                                Icon: ="ChevronDown"
                                Layout: ='ButtonCanvas.Layout'.IconOnly
                                LayoutMinHeight: =32
                                LayoutMinWidth: =96
                                OnSelect: |-
                                    =UpdateContext({quantityCompleted: quantityCompleted - 1})
                                Width: =96
                                X: =0
                                Y: =0
                                ZIndex: =2

                    Container13_6 As groupContainer.verticalAutoLayoutContainer:
                        AlignInContainer: =AlignInContainer.SetByContainer
                        LayoutAlignItems: =LayoutAlignItems.Stretch
                        LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                        LayoutMinHeight: =30
                        LayoutMinWidth: =250
                        LayoutMode: =LayoutMode.Auto
                        PaddingBottom: =15
                        PaddingTop: =15
                        RadiusBottomLeft: =4
                        RadiusBottomRight: =4
                        RadiusTopLeft: =4
                        RadiusTopRight: =4
                        ZIndex: =3

                        TextCanvas3_6 As Text:
                            AlignInContainer: =AlignInContainer.Center
                            AutoHeight: =true
                            DisplayMode: =DisplayMode.Edit
                            Height: =32
                            LayoutMinHeight: =32
                            LayoutMinWidth: =96
                            Text: ="Potrebno"
                            Width: =96
                            X: =40
                            Y: =40
                            ZIndex: =1

                        "inp_potrebnoQty As 'Text input'":
                            Align: ='TextInputCanvas.Align'.End
                            AlignInContainer: =AlignInContainer.Center
                            BasePaletteColor: =
                            DisplayMode: =DisplayMode.Edit
                            FontSize: =12
                            Height: =32
                            LayoutMinHeight: =32
                            LayoutMinWidth: =320
                            Placeholder: ="Unesite LOT"
                            Value: =If(IsBlank(potrebnaKolicina),0,potrebnaKolicina)
                            Width: =150
                            X: =40
                            Y: =40
                            ZIndex: =2

                Container10_1 As groupContainer.horizontalAutoLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    DropShadow: =DropShadow.Light
                    FillPortions: =0
                    Height: =70
                    LayoutAlignItems: =LayoutAlignItems.Stretch
                    LayoutGap: =10
                    LayoutJustifyContent: =LayoutJustifyContent.End
                    LayoutMinHeight: =40
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    PaddingBottom: =20
                    PaddingLeft: =10
                    PaddingRight: =10
                    PaddingTop: =20
                    RadiusBottomLeft: =4
                    RadiusBottomRight: =4
                    RadiusTopLeft: =4
                    RadiusTopRight: =4
                    ZIndex: =3

                    ButtonCanvas2_1 As Button:
                        Appearance: ='ButtonCanvas.Appearance'.Secondary
                        BasePaletteColor: =
                        DisplayMode: =DisplayMode.Edit
                        Height: =32
                        Icon: ="DismissCircle"
                        IconStyle: ='ButtonCanvas.IconStyle'.Filled
                        Layout: ='ButtonCanvas.Layout'.IconAfter
                        LayoutMinHeight: =32
                        LayoutMinWidth: =96
                        OnSelect: |-
                            =Reset(inp_Quantity_1);
                            Reset(inp_rezQty);
                            Reset(inp_potrebnoQty);
                            UpdateContext({potrebnaKolicina: 0});
                            Set(isModalOpen, false);
                        Text: ="Zatvori"
                        Width: =96
                        X: =40
                        Y: =40
                        ZIndex: =1

                    ButtonCanvas3_1 As Button:
                        BasePaletteColor: =
                        DisplayMode: =DisplayMode.Edit
                        Height: =32
                        Icon: ="Save"
                        Layout: ='ButtonCanvas.Layout'.IconAfter
                        LayoutMinHeight: =32
                        LayoutMinWidth: =96
                        OnSelect: |
                            =Patch(colEntries, LookUp(colEntries, glr_ProResEntries.Selected.Entry_No = Entry_No), {Quantity_Completed: quantityCompleted});
                            Reset(inp_Quantity_1);
                            Reset(inp_rezQty);
                            Reset(inp_potrebnoQty);
                            UpdateContext({potrebnaKolicina: 0});
                            Set(
                                isModalOpen,
                                false
                            );
                        Text: ="Spasi"
                        Width: =96
                        X: =0
                        Y: =0
                        ZIndex: =2

