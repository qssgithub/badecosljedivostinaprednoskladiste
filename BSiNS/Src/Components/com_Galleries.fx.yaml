com_Galleries As CanvasComponent:
    AddNew: =false
    EntriesToDisplay: =5
    EntryLabels: |-
        ={Line1: "Line1", Line2: "Line2", Line3: "Line3", Line4: "Line4", Line5: "Line5"}
    Fill: =RGBA(0, 0, 0, 0)
    Height: =300
    IsCalculatedItem: =false
    LineLabels: |-
        ={Line1: "Line1", Line2: "Line2", Line3: "Line3", Line4: "Line4", Line5: "Line5"}
    LineValuePosition: |-
        ={Item_No: Blank(), Posting_Group: Blank(), Inv_Posting_Group: Blank(), Description: 1, Quantity: Blank(), Unit_Of_Measure: Blank(), 'Qty-to_Ship': Blank(), Line_No: 0, LotNo: 2, Exp_Date: 3, QtyInv: 4}
    LineValueVisibility: |-
        ={Line_No: true, Item_No: true, Posting_Group: false, Inv_Posting_Group: true, Description: true, Quantity: false, Unit_Of_Measure: false, 'Qty-to_Ship': true, LotNo: true, Exp_Date: true, QtyInv: true}
    NumberOfLinesToDisplay: =5
    OnReset: =
    SelectedEntry: =glr_Entries.Selected
    SelectedLine: =glr_Lines.Selected
    VisibleResEntryList: =true
    Width: =App.Width
    X: =0
    Y: =0
    ZIndex: =1

    con_Galleries As groupContainer.manualLayoutContainer:
        Height: =Parent.Height
        RadiusBottomLeft: =4
        RadiusBottomRight: =4
        RadiusTopLeft: =4
        RadiusTopRight: =4
        Width: =Parent.Width
        ZIndex: =1

        vrt_Galleries As groupContainer.verticalAutoLayoutContainer:
            DropShadow: =DropShadow.Light
            Height: =Parent.Height - 10
            LayoutAlignItems: =LayoutAlignItems.Stretch
            LayoutDirection: =LayoutDirection.Vertical
            LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
            LayoutMode: =LayoutMode.Auto
            RadiusBottomLeft: =4
            RadiusBottomRight: =4
            RadiusTopLeft: =4
            RadiusTopRight: =4
            Width: =Parent.Width - 10
            X: =5
            Y: =5
            ZIndex: =1

            txt_Lines As Text:
                AutoHeight: =false
                BorderStyle: =""
                DisplayMode: =DisplayMode.Edit
                Height: =32
                LayoutMinHeight: =32
                LayoutMinWidth: =96
                PaddingBottom: =0
                PaddingLeft: =5
                PaddingRight: =5
                PaddingTop: =0
                Size: =18
                Text: ="Stavke"
                Visible: =wizardStep = 1
                Weight: ='TextCanvas.Weight'.Semibold
                Width: =96
                X: =0
                Y: =0
                ZIndex: =1

            "glr_Lines As gallery.'BrowseLayout_Vertical_ThreeTextVariant_ver5.0'":
                AlignInContainer: =AlignInContainer.SetByContainer
                BorderColor: =App.Theme.Colors.Darker40
                Default: |+
                    =LookUp(
                        colLines,
                        If(
                            !IsBlank(SelectedLine.'Line_No.'),
                            'Line_No.' = SelectedLine.'Line_No.'
                        )
                    )
                    
                DelayItemLoading: =true
                Items: =colLines
                Layout: =Layout.Vertical
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LoadingSpinner: =LoadingSpinner.Data
                OnSelect: |
                    =If(
                        com_Galleries.VisibleResEntryList,
                        Set(
                            wizardStep,
                            2
                        ),
                        Set(
                            isModalOpen,
                            true
                        )
                    );
                    Set(
                        LotNoPropVisibleCheck,
                        CountIf(lockedItems, lineId = com_Galleries.SelectedLine.'Line_No.') > 0
                    );
                    
                    Set(
                        ScannedItem,
                        Blank()
                    );
                TemplatePadding: =0
                TemplateSize: =32 * com_Galleries.NumberOfLinesToDisplay
                Visible: =wizardStep = 1
                ZIndex: =2

                rct_LineSeparator As rectangle:
                    BorderColor: =App.Theme.Colors.Darker40
                    Fill: =RGBA(255, 255, 255, 1)
                    Height: =8
                    OnSelect: =Select(Parent)
                    Width: =Parent.TemplateWidth
                    Y: =Parent.TemplateHeight - Self.Height
                    ZIndex: =6

                rct_LineSelected As rectangle:
                    BorderColor: =App.Theme.Colors.Darker40
                    Fill: =App.Theme.Colors.Darker30
                    Height: =Parent.TemplateHeight - rct_LineSeparator.Height
                    OnSelect: =Select(Parent)
                    Visible: =ThisItem.IsSelected
                    Width: =4
                    ZIndex: =7

                grp_LinesLabels As group:
                    Height: =5
                    Width: =5
                    X: =40
                    Y: =40
                    ZIndex: =9

                    lbl_Line1 As label:
                        Color: =RGBA(50, 49, 48, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =Self.Size * 1.8
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =com_Galleries.LineLabels.Line1
                        VerticalAlign: =VerticalAlign.Top
                        X: =16
                        Y: =10
                        ZIndex: =3

                    lbl_Line2 As label:
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =Self.Size * 1.8
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =com_Galleries.LineLabels.Line2
                        VerticalAlign: =VerticalAlign.Top
                        X: =lbl_Line1.X
                        Y: =lbl_Line1.Y + lbl_Line1.Height + 5
                        ZIndex: =4

                    lbl_Line3 As label:
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =Self.Size * 1.8
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =com_Galleries.LineLabels.Line3
                        VerticalAlign: =VerticalAlign.Top
                        X: =lbl_Line1.X
                        Y: =lbl_Line2.Y + lbl_Line2.Height + 5
                        ZIndex: =5

                    lbl_Line4 As label:
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =Self.Size * 1.8
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =com_Galleries.LineLabels.Line4
                        VerticalAlign: =VerticalAlign.Top
                        X: =lbl_Line1.X
                        Y: =lbl_Line3.Y + lbl_Line3.Height + 5
                        ZIndex: =8

                    lbl_Line5 As label:
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =Self.Size * 1.8
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =com_Galleries.LineLabels.Line5
                        VerticalAlign: =VerticalAlign.Top
                        X: =lbl_Line1.X
                        Y: =lbl_Line4.Y + lbl_Line4.Height + 5
                        ZIndex: =9

                icn_InvAdd_2 As icon.AddDocument:
                    BorderColor: =App.Theme.Colors.Darker40
                    Color: =App.Theme.Colors.Darker30
                    DisabledBorderColor: =RGBA(166, 166, 166, 1)
                    DisabledColor: =RGBA(244, 244, 244, 1)
                    Height: =32
                    Icon: =Icon.AddDocument
                    OnSelect: |
                        =Set(
                            Counter,
                            Counter + 1
                        );
                        Collect(
                            colLines,
                            {
                                Journal_Template_Name: ThisItem.Journal_Template_Name,
                                Journal_Batch_Name: ThisItem.Journal_Batch_Name,
                                'Line_No.': Text((ThisItem.Line_No * Counter) + 1),
                                'Document_No.': ThisItem.'Document_No.',
                                Description: ThisItem.Description,
                                Source_Type: ThisItem.Source_Type,
                                'Source_No.': ThisItem.'Source_No.',
                                Source_Code: ThisItem.Source_Code,
                                'Item_No.': ThisItem.'Item_No.',
                                'Phys._Inventory': ThisItem.'Phys._Inventory',
                                Location_Code: ThisItem.Location_Code,
                                Posting_Date: ThisItem.Posting_Date,
                                Document_Date: ThisItem.Document_Date,
                                Sales_Price: ThisItem.Sales_Price,
                                Qty_Calculated: Text(0),
                                Qty_Calculated_Ext: Text(0),
                                Quantity: Text(0),
                                Entry_Type: ThisItem.Entry_Type,
                                Qty_Phys_Inventory: Text(1),//mijenja se
                                Qty_Phys_Inventory_Ext: Text(0),
                                Gen_Bus_Posting_Group: ThisItem.Gen_Bus_Posting_Group,
                                Lot_No: "LOT" & Text(//mijenja se
                                    DateAdd(
                                        Today(),
                                        1
                                    ),
                                    "ddmmyy"
                                ),
                                Item_Expiration_Date: ThisItem.Item_Expiration_Date,
                                Barcode: ThisItem.Barcode
                            }
                        );
                        
                        Set(
                            ScannedItem,
                            Blank()
                        );
                        Reset(glr_Lines);
                        Set(
                            SelectedLine,
                            LookUp(colLines, 'Line_No.' = Text((Counter * 10000) + 1))
                        );
                    Visible: =!com_Galleries.VisibleResEntryList && com_Galleries.AddNew && !IsBlank(LookUp(lockedItems, lineId = ThisItem.'Line_No.'))
                    Width: =32
                    X: =Parent.TemplateWidth - 50
                    Y: =lbl_Line4.Y - 10
                    ZIndex: =18

                icn_InvRemove As icon.AddDocument:
                    BorderColor: =App.Theme.Colors.Darker40
                    Color: =App.Theme.Colors.Darker30
                    DisabledBorderColor: =RGBA(166, 166, 166, 1)
                    DisabledColor: =RGBA(244, 244, 244, 1)
                    Height: =32
                    Icon: =Icon.Trash
                    OnSelect: |-
                        =Remove(colLines, LookUp(colLines, 'Line_No.' = glr_Lines.Selected.'Line_No.'));
                        Set(
                            SelectedLine,
                            Last(colLines)
                        );
                    Visible: |-
                        =!com_Galleries.VisibleResEntryList && com_Galleries.AddNew && IsBlank(
                            LookUp(
                                lockedItems,
                                lineId = ThisItem.'Line_No.'
                            )
                        )
                    Width: =32
                    X: =Parent.TemplateWidth - 50
                    Y: =lbl_Line4.Y - 10
                    ZIndex: =20

                Group1 As group:
                    Height: =5
                    Width: =5
                    X: =40
                    Y: =40
                    ZIndex: =20

                    lbl_LineQtyToShip As label:
                        Color: =RGBA(50, 49, 48, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =If(Self.Visible, Self.Size * 1.8, 0)
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =ThisItem.'Qty-to_Ship'
                        VerticalAlign: =VerticalAlign.Top
                        Visible: =com_Galleries.LineValueVisibility.'Qty-to_Ship'
                        Width: =Parent.TemplateWidth - 175
                        X: =lbl_Line1.Width + lbl_Line1.X
                        Y: =lbl_Line1.Y + (lbl_Line1.Height * com_Galleries.LineValuePosition.'Qty-to_Ship') + (com_Galleries.LineValuePosition.'Qty-to_Ship' * 5)
                        ZIndex: =1

                    lbl_LineUnitOfMeasure As label:
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =If(Self.Visible, Self.Size * 1.8, 0)
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =ThisItem.Unit_Of_Measure
                        VerticalAlign: =VerticalAlign.Top
                        Visible: =com_Galleries.LineValueVisibility.Unit_Of_Measure
                        Width: =Parent.TemplateWidth - 175
                        X: =lbl_Line1.Width + lbl_Line1.X
                        Y: =lbl_Line1.Y + (lbl_Line1.Height * com_Galleries.LineValuePosition.Unit_Of_Measure) + (com_Galleries.LineValuePosition.Unit_Of_Measure * 5)
                        ZIndex: =2

                    lbl_LineQuantity As label:
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =If(Self.Visible, Self.Size * 1.8, 0)
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =ThisItem.Quantity
                        VerticalAlign: =VerticalAlign.Top
                        Visible: =com_Galleries.LineValueVisibility.Quantity
                        Width: =Parent.TemplateWidth - 175
                        X: =lbl_Line1.Width + lbl_Line1.X
                        Y: =lbl_Line1.Y + (lbl_Line1.Height * com_Galleries.LineValuePosition.Quantity) + (com_Galleries.LineValuePosition.Quantity * com_Galleries.NumberOfLinesToDisplay)
                        ZIndex: =10

                    lbl_LineDescription As label:
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =If(Self.Visible, Self.Size * 1.8, 0)
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =ThisItem.Description
                        VerticalAlign: =VerticalAlign.Top
                        Visible: =com_Galleries.LineValueVisibility.Description
                        Width: =Parent.TemplateWidth - 175
                        X: =lbl_Line1.Width + lbl_Line1.X
                        Y: =lbl_Line1.Y + (lbl_Line1.Height * com_Galleries.LineValuePosition.Description) + (com_Galleries.LineValuePosition.Description * com_Galleries.NumberOfLinesToDisplay)
                        ZIndex: =11

                    lbl_LineInvPostingGroup As label:
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =If(Self.Visible, Self.Size * 1.8, 0)
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =ThisItem.Inv_Posting_Group
                        VerticalAlign: =VerticalAlign.Top
                        Visible: =com_Galleries.LineValueVisibility.Inv_Posting_Group
                        Width: =Parent.TemplateWidth - 175
                        X: =lbl_Line1.Width + lbl_Line1.X
                        Y: =lbl_Line1.Y + (lbl_Line1.Height * com_Galleries.LineValuePosition.Inv_Posting_Group) + (com_Galleries.LineValuePosition.Inv_Posting_Group * com_Galleries.NumberOfLinesToDisplay)
                        ZIndex: =12

                    lbl_LinePostingGroup As label:
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =If(Self.Visible, Self.Size * 1.8, 0)
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =ThisItem.Posting_Group
                        VerticalAlign: =VerticalAlign.Top
                        Visible: =com_Galleries.LineValueVisibility.Posting_Group
                        Width: =Parent.TemplateWidth - 175
                        X: =lbl_Line1.Width + lbl_Line1.X
                        Y: =lbl_Line1.Y + (lbl_Line1.Height * com_Galleries.LineValuePosition.Posting_Group) + (com_Galleries.LineValuePosition.Posting_Group * com_Galleries.NumberOfLinesToDisplay)
                        ZIndex: =13

                    lbl_LineItemNo As label:
                        Color: =RGBA(50, 49, 48, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =Self.Size * 1.8
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =ThisItem.Item_No
                        VerticalAlign: =VerticalAlign.Top
                        Visible: =com_Galleries.LineValueVisibility.Item_No
                        Width: =Parent.TemplateWidth - 175
                        X: =lbl_Line1.Width + lbl_Line1.X
                        Y: =lbl_Line1.Y + (lbl_Line1.Height * com_Galleries.LineValuePosition.Item_No) + (com_Galleries.LineValuePosition.Item_No * com_Galleries.NumberOfLinesToDisplay)
                        ZIndex: =14

                    lbl_LineLineNo As label:
                        Color: =RGBA(50, 49, 48, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =Self.Size * 1.8
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =ThisItem.'Line_No.'
                        VerticalAlign: =VerticalAlign.Top
                        Visible: =com_Galleries.LineValueVisibility.Line_No
                        Width: =Parent.TemplateWidth - 175
                        X: =lbl_Line1.Width + lbl_Line1.X
                        Y: =lbl_Line1.Y + (lbl_Line1.Height * com_Galleries.LineValuePosition.Line_No) + (com_Galleries.LineValuePosition.Line_No * com_Galleries.NumberOfLinesToDisplay)
                        ZIndex: =15

                    lbl_LineLotNo As label:
                        Color: =RGBA(50, 49, 48, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =Self.Size * 1.8
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =ThisItem.Lot_No
                        VerticalAlign: =VerticalAlign.Top
                        Visible: =com_Galleries.LineValueVisibility.LotNo
                        Width: =Parent.TemplateWidth - 175
                        X: =lbl_Line1.Width + lbl_Line1.X
                        Y: =lbl_Line1.Y + (lbl_Line1.Height * com_Galleries.LineValuePosition.LotNo) + (com_Galleries.LineValuePosition.LotNo * com_Galleries.NumberOfLinesToDisplay)
                        ZIndex: =16

                    lbl_LineExpDate As label:
                        Color: =RGBA(50, 49, 48, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =Self.Size * 1.8
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =ThisItem.Item_Expiration_Date
                        VerticalAlign: =VerticalAlign.Top
                        Visible: =com_Galleries.LineValueVisibility.Exp_Date
                        Width: =Parent.TemplateWidth - 175
                        X: =lbl_Line1.Width + lbl_Line1.X
                        Y: =lbl_Line1.Y + (lbl_Line1.Height * com_Galleries.LineValuePosition.Exp_Date) + (com_Galleries.LineValuePosition.Exp_Date * com_Galleries.NumberOfLinesToDisplay)
                        ZIndex: =17

                    lbl_LineQtyInv As label:
                        Color: =RGBA(50, 49, 48, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =Self.Size * 1.8
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =ThisItem.Qty_Phys_Inventory
                        VerticalAlign: =VerticalAlign.Top
                        Visible: =com_Galleries.LineValueVisibility.QtyInv
                        Width: =Parent.TemplateWidth - 175
                        X: =lbl_Line1.Width + lbl_Line1.X
                        Y: =lbl_Line1.Y + (lbl_Line1.Height * com_Galleries.LineValuePosition.QtyInv) + (com_Galleries.LineValuePosition.QtyInv * com_Galleries.NumberOfLinesToDisplay)
                        ZIndex: =19

            btn_BackToLines As Button:
                Align: =Align.Left
                Appearance: ='ButtonCanvas.Appearance'.Transparent
                BasePaletteColor: =
                BorderStyle: =""
                DisplayMode: =DisplayMode.Edit
                FontColor: =
                FontSize: =18
                Height: =32
                Icon: ="ArrowLeft"
                IconStyle: ='ButtonCanvas.IconStyle'.Outline
                Layout: ='ButtonCanvas.Layout'.IconBefore
                LayoutMinHeight: =32
                LayoutMinWidth: =96
                OnSelect: =Set(wizardStep, 1)
                PaddingBottom: =0
                PaddingLeft: =5
                PaddingRight: =5
                PaddingTop: =0
                Text: ="Rezervacijski unosi"
                Visible: =wizardStep = 2
                Width: =170
                X: =0
                Y: =0
                ZIndex: =3

            "glr_Entries As gallery.'BrowseLayout_Vertical_ThreeTextVariant_ver5.0'":
                AlignInContainer: =AlignInContainer.SetByContainer
                BorderColor: =App.Theme.Colors.Darker40
                Default: |-
                    =LookUp(
                        colEntries,
                        If(
                            !IsBlank(SelectedEntry.Entry_No),
                            Entry_No = SelectedEntry.Entry_No
                        )
                    )
                DelayItemLoading: =true
                Items: =Filter(colEntries, ThisRecord.Source_Ref_No = glr_Lines.Selected.Line_No)
                Layout: =Layout.Vertical
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LoadingSpinner: =LoadingSpinner.Data
                OnSelect: =Set(isModalOpen, true)
                TemplatePadding: =0
                TemplateSize: =32 * com_Galleries.EntriesToDisplay
                Visible: =wizardStep = 2
                ZIndex: =4

                rct_EntrySeparator_1 As rectangle:
                    BorderColor: =App.Theme.Colors.Darker40
                    Fill: =RGBA(255, 255, 255, 1)
                    Height: =8
                    OnSelect: =Select(Parent)
                    Width: =Parent.TemplateWidth
                    Y: =Parent.TemplateHeight - Self.Height
                    ZIndex: =7

                rct_EntrySelected As rectangle:
                    BorderColor: =App.Theme.Colors.Darker40
                    Fill: =App.Theme.Colors.Darker30
                    Height: =Parent.TemplateHeight - rct_EntrySeparator_1.Height
                    OnSelect: =Select(Parent)
                    Visible: =ThisItem.IsSelected
                    Width: =4
                    ZIndex: =10

                grp_EntriesValues As group:
                    Height: =5
                    Width: =5
                    X: =40
                    Y: =40
                    ZIndex: =12

                    lbl_EntryQuantityNewLOT As label:
                        Align: =Align.Justify
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =22
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =Abs(ThisItem.Quantity_NewLOT)
                        VerticalAlign: =VerticalAlign.Top
                        Visible: =!IsBlank(com_Galleries.EntryLabels.Line5)
                        Width: =1181
                        X: =163
                        Y: =120
                        ZIndex: =2

                    lbl_EntryQuantityCompleted As label:
                        Align: =Align.Justify
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =22
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =Abs(ThisItem.Quantity_Completed)
                        VerticalAlign: =VerticalAlign.Top
                        Width: =1184
                        X: =163
                        Y: =95
                        ZIndex: =3

                    lbl_EntryLOTNo As label:
                        Align: =Align.Justify
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =22
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =ThisItem.LOT_No
                        VerticalAlign: =VerticalAlign.Top
                        Width: =1181
                        X: =161
                        Y: =70
                        ZIndex: =4

                    lbl_EntryExpDate As label:
                        Align: =Align.Justify
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =22
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =ThisItem.Exp_Date
                        VerticalAlign: =VerticalAlign.Top
                        Width: =1181
                        X: =161
                        Y: =42
                        ZIndex: =9

                    lbl_EntryItemNo As label:
                        Align: =Align.Justify
                        Color: =RGBA(50, 49, 48, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =22
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =ThisItem.Entry_No
                        VerticalAlign: =VerticalAlign.Top
                        Width: =1181
                        X: =161
                        Y: =15
                        ZIndex: =11

                icn_InvAdd_1 As icon.AddDocument:
                    BorderColor: =App.Theme.Colors.Darker40
                    Color: =App.Theme.Colors.Darker30
                    DisabledBorderColor: =RGBA(166, 166, 166, 1)
                    DisabledColor: =RGBA(244, 244, 244, 1)
                    Height: =32
                    Icon: =Icon.AddDocument
                    OnSelect: |-
                        =Set(Counter, Counter + 1);
                        
                        Collect(
                            colEntries,
                            {
                                Created_By: ThisItem.Created_By,
                                Creation_Date: ThisItem.Creation_Date,
                                Entry_No: Text(Counter),
                                Exp_Date: ThisItem.Exp_Date,
                                Exp_Receipt_Date: ThisItem.Exp_Receipt_Date,
                                Item_No: ThisItem.Item_No,
                                Item_Tracking: ThisItem.Item_Tracking,
                                LOT_No: "LOT" & Text(//mijenja se
                                    DateAdd(
                                        Today(),
                                        1
                                    ),
                                    "ddmmyy"
                                ),
                                Location_Code: ThisItem.Location_Code,
                                Positive: ThisItem.Positive,
                                'Qty-to-Handle_Base': Text(0),
                                'Qty-to-Invoice_Base': Text(0),
                                Quantity: Text(0),
                                Quantity_Base: Text(0),
                                Quantity_Completed: 1, //mijenja se
                                Quantity_NewLOT: 0,
                                Res_Status: ThisItem.Res_Status,
                                Shipment_Date: ThisItem.Shipment_Date,
                                Source_ID: ThisItem.Source_ID,
                                Source_Ref_No: ThisItem.Source_Ref_No,
                                Source_SubType: ThisItem.Source_SubType,
                                Source_Type: ThisItem.Source_Type
                            }
                        );
                        Set(
                            ScannedItem,
                            Blank()
                        );
                        Reset(glr_Entries);
                        Set(
                            SelectedEntry,
                            LookUp(colEntries, Entry_No = Text(Counter))
                        );
                    Visible: =com_Galleries.VisibleResEntryList && com_Galleries.AddNew && !IsBlank(LookUp(lockedItems, entryId = ThisItem.Entry_No))
                    Width: =32
                    X: =Parent.TemplateWidth - 50
                    Y: =Body2_7.Y - 10
                    ZIndex: =13

                grp_EntriesLabels As group:
                    Height: =5
                    Width: =5
                    X: =40
                    Y: =40
                    ZIndex: =13

                    Body2_8 As label:
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =Self.Size * 1.8
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =com_Galleries.EntryLabels.Line5
                        VerticalAlign: =VerticalAlign.Top
                        Visible: =!IsBlank(com_Galleries.EntryLabels.Line5)
                        X: =16
                        Y: =121
                        ZIndex: =1

                    Body2_7 As label:
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =Self.Size * 1.8
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =com_Galleries.EntryLabels.Line4
                        VerticalAlign: =VerticalAlign.Top
                        X: =16
                        Y: =94
                        ZIndex: =5

                    Body2_6 As label:
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =Self.Size * 1.8
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =com_Galleries.EntryLabels.Line3
                        VerticalAlign: =VerticalAlign.Top
                        X: =16
                        Y: =68
                        ZIndex: =6

                    Subtitle2_2 As label:
                        Color: =RGBA(0, 0, 0, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =Self.Size * 1.8
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =com_Galleries.EntryLabels.Line2
                        VerticalAlign: =VerticalAlign.Top
                        X: =16
                        Y: =40
                        ZIndex: =8

                    Title3_2 As label:
                        Color: =RGBA(50, 49, 48, 1)
                        DisabledColor: =RGBA(166, 166, 166, 1)
                        Font: =App.Theme.Font
                        FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                        Height: =Self.Size * 1.8
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =com_Galleries.EntryLabels.Line1
                        VerticalAlign: =VerticalAlign.Top
                        X: =16
                        Y: =12
                        ZIndex: =12

                icn_InvRemove_3 As icon.AddDocument:
                    BorderColor: =App.Theme.Colors.Darker40
                    Color: =App.Theme.Colors.Darker30
                    DisabledBorderColor: =RGBA(166, 166, 166, 1)
                    DisabledColor: =RGBA(244, 244, 244, 1)
                    Height: =32
                    Icon: =Icon.Trash
                    OnSelect: |-
                        =Remove(colEntries, LookUp(colEntries, Entry_No = glr_Entries.Selected.Entry_No));
                        Reset(glr_Entries);
                        Set(
                            SelectedEntry,
                            Last(colEntries)
                        );
                    Visible: |-
                        =com_Galleries.VisibleResEntryList && com_Galleries.AddNew && IsBlank(
                            LookUp(
                                lockedItems,
                                entryId = ThisItem.Entry_No
                            )
                        )
                    Width: =32
                    X: =Parent.TemplateWidth - 50
                    Y: =Body2_7.Y - 10
                    ZIndex: =14

