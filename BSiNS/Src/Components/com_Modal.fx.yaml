com_Modal As CanvasComponent:
    ChildTabPriority: =
    Fill: =RGBA(0, 0, 0, 0)
    Height: =App.Height
    IsInventura: =true
    LineId: ="Text"
    ResEntryId: ="Text"
    Width: =App.Width
    X: =0
    Y: =0
    ZIndex: =1

    con_ModalFade As groupContainer.manualLayoutContainer:
        Fill: =RGBA(0, 0, 0, 0.5)
        Height: =Parent.Height
        Width: =Parent.Width
        ZIndex: =1

        con_Modal As groupContainer.manualLayoutContainer:
            DropShadow: =DropShadow.ExtraBold
            Fill: =RGBA(255, 255, 255, 1)
            Height: =Parent.Height * 80%
            RadiusBottomLeft: =4
            RadiusBottomRight: =4
            RadiusTopLeft: =4
            RadiusTopRight: =4
            Width: =Parent.Width * 75%
            X: =(Parent.Width - Self.Width) / 2
            Y: =(Parent.Height - Self.Height) / 2
            ZIndex: =1

            vrt_Modal As groupContainer.verticalAutoLayoutContainer:
                Height: =Parent.Height
                LayoutAlignItems: =LayoutAlignItems.Stretch
                LayoutDirection: =LayoutDirection.Vertical
                LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                LayoutMode: =LayoutMode.Auto
                RadiusBottomLeft: =4
                RadiusBottomRight: =4
                RadiusTopLeft: =4
                RadiusTopRight: =4
                Width: =Parent.Width
                ZIndex: =1

                hrz_ModalHeader As groupContainer.horizontalAutoLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    DropShadow: =DropShadow.Light
                    Fill: |
                        =RGBA(189, 49, 51, 1)
                    FillPortions: =0
                    Height: =50
                    LayoutAlignItems: =LayoutAlignItems.Center
                    LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    PaddingLeft: =5
                    PaddingRight: =5
                    ZIndex: =1

                    txt_ModalHeader As Text:
                        Align: ='TextCanvas.Align'.Center
                        AutoHeight: =true
                        DisplayMode: =DisplayMode.Edit
                        FillPortions: =1
                        FontColor: =RGBA(255, 255, 255, 1)
                        Height: =32
                        LayoutMinHeight: =32
                        LayoutMinWidth: =96
                        Size: =20
                        Text: ="Unesite podatke"
                        Width: =96
                        X: =0
                        Y: =0
                        ZIndex: =1

                    btn_ModalClose As Button:
                        Appearance: ='ButtonCanvas.Appearance'.Transparent
                        BasePaletteColor: =
                        DisplayMode: =DisplayMode.Edit
                        FontColor: =RGBA(255, 255, 255, 1)
                        FontSize: =32
                        Height: =32
                        Icon: ="DismissCircle"
                        IconStyle: ='ButtonCanvas.IconStyle'.Filled
                        Layout: ='ButtonCanvas.Layout'.IconOnly
                        LayoutMinHeight: =32
                        LayoutMinWidth: =96
                        OnSelect: |
                            =Reset(inp_rezQty_2);
                            Reset(inp_potrebnoQty_2);
                            Set(
                                isModalOpen,
                                false
                            );
                        Text: ="Zatvori"
                        Width: =32
                        X: =40
                        Y: =40
                        ZIndex: =2

                vrt_ModalBody As groupContainer.verticalAutoLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    DropShadow: =DropShadow.Light
                    FillPortions: =3
                    LayoutAlignItems: =LayoutAlignItems.Stretch
                    LayoutDirection: =LayoutDirection.Vertical
                    LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    PaddingBottom: =15
                    PaddingLeft: =15
                    PaddingRight: =15
                    PaddingTop: =15
                    ZIndex: =2

                    Container13_10 As groupContainer.verticalAutoLayoutContainer:
                        LayoutAlignItems: =LayoutAlignItems.Center
                        LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                        LayoutMinHeight: =30
                        LayoutMinWidth: =250
                        LayoutMode: =LayoutMode.Auto
                        RadiusBottomLeft: =4
                        RadiusBottomRight: =4
                        RadiusTopLeft: =4
                        RadiusTopRight: =4
                        ZIndex: =2

                        TextCanvas3_11 As Text:
                            AutoHeight: =true
                            DisplayMode: =DisplayMode.Edit
                            Height: =32
                            LayoutMinHeight: =32
                            LayoutMinWidth: =80
                            Size: =20
                            Text: ="Rezervisano"
                            Width: =110
                            X: =40
                            Y: =40
                            ZIndex: =1

                        "inp_rezQty_2 As 'Text input'":
                            Align: ='TextInputCanvas.Align'.Center
                            Appearance: ='TextInputCanvas.Appearance'.Outline
                            BasePaletteColor: =
                            DisplayMode: =DisplayMode.Edit
                            FontSize: =0
                            Height: =32
                            LayoutMinHeight: =32
                            LayoutMinWidth: =320
                            OnChange: |
                                =If(
                                    (!IsNumeric(inp_rezQty_2.Value) && !IsBlank(inp_rezQty_2.Value)) || Value(inp_rezQty_2.Value) < 0,
                                    Notify(
                                        "Unesite pozitivan broj.",
                                        NotificationType.Error,
                                        2000
                                    );
                                    Reset(inp_rezQty_2);
                                    UpdateContext({potrebnaKolicina: 0}),
                                    
                                    If(
                                        Value(inp_rezQty_2.Value) > Abs(glr_ProResEntries.Selected.Quantity_Completed),
                                        Reset(inp_rezQty_2);
                                        UpdateContext({potrebnaKolicina: 0});
                                        Notify(
                                            "Maksimalna količina za isporuku je " & Abs(glr_ProResEntries.Selected.Quantity_Completed),
                                            NotificationType.Information,
                                            2000
                                        ),
                                        UpdateContext({potrebnaKolicina: Abs(glr_ProResEntries.Selected.Quantity) - inp_rezQty_2.Value})
                                    )
                                );
                            Placeholder: ="Unesite rezervisano količinu"
                            Required: =true
                            Type: ="Text"
                            Value: =Abs(QuantityCompleted)
                            Visible: =true
                            Width: =200
                            X: =40
                            Y: =40
                            ZIndex: =3

                        Container8_1 As groupContainer.verticalAutoLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            FillPortions: =0
                            LayoutAlignItems: =LayoutAlignItems.Center
                            LayoutDirection: =LayoutDirection.Vertical
                            LayoutGap: =5
                            LayoutJustifyContent: =LayoutJustifyContent.Center
                            LayoutMinHeight: =100
                            LayoutMinWidth: =250
                            LayoutMode: =LayoutMode.Auto
                            RadiusBottomLeft: =4
                            RadiusBottomRight: =4
                            RadiusTopLeft: =4
                            RadiusTopRight: =4
                            Width: =100
                            ZIndex: =4

                            ButtonCanvas9_2 As Button:
                                DisplayMode: =DisplayMode.Edit
                                FillPortions: =1
                                FontSize: =60
                                Height: =32
                                Icon: ="ChevronUp"
                                Layout: ='ButtonCanvas.Layout'.IconOnly
                                LayoutMinHeight: =32
                                LayoutMinWidth: =96
                                OnSelect: =Set(QuantityCompleted, QuantityCompleted + 1);
                                Width: =96
                                X: =0
                                Y: =0
                                ZIndex: =1

                            ButtonCanvas9_3 As Button:
                                DisplayMode: =DisplayMode.Edit
                                FillPortions: =1
                                FontSize: =60
                                Height: =32
                                Icon: ="ChevronDown"
                                Layout: ='ButtonCanvas.Layout'.IconOnly
                                LayoutMinHeight: =32
                                LayoutMinWidth: =96
                                OnSelect: =Set(QuantityCompleted, QuantityCompleted - 1);
                                Width: =96
                                X: =0
                                Y: =0
                                ZIndex: =2

                    Container13_11 As groupContainer.verticalAutoLayoutContainer:
                        AlignInContainer: =AlignInContainer.SetByContainer
                        LayoutAlignItems: =LayoutAlignItems.Center
                        LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                        LayoutMinHeight: =30
                        LayoutMinWidth: =250
                        LayoutMode: =LayoutMode.Auto
                        RadiusBottomLeft: =4
                        RadiusBottomRight: =4
                        RadiusTopLeft: =4
                        RadiusTopRight: =4
                        Visible: =!com_Modal.IsInventura
                        ZIndex: =3

                        TextCanvas3_13 As Text:
                            AutoHeight: =true
                            DisplayMode: =DisplayMode.Edit
                            Height: =32
                            LayoutMinHeight: =32
                            LayoutMinWidth: =96
                            Size: =20
                            Text: ="Potrebno"
                            Width: =96
                            X: =40
                            Y: =40
                            ZIndex: =1

                        "inp_potrebnoQty_2 As 'Text input'":
                            Align: ='TextInputCanvas.Align'.Center
                            Appearance: ='TextInputCanvas.Appearance'.Outline
                            BasePaletteColor: =
                            DisplayMode: =DisplayMode.Edit
                            FontSize: =0
                            Height: =32
                            LayoutMinHeight: =32
                            LayoutMinWidth: =320
                            Placeholder: ="Unesite potrebnu količinu"
                            Value: =If(IsBlank(com_Modal.QuantityNewLOT),0,com_Modal.QuantityNewLOT)
                            Width: =200
                            X: =40
                            Y: =40
                            ZIndex: =2

                        Container8_2 As groupContainer.verticalAutoLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            FillPortions: =0
                            LayoutAlignItems: =LayoutAlignItems.Center
                            LayoutDirection: =LayoutDirection.Vertical
                            LayoutGap: =5
                            LayoutJustifyContent: =LayoutJustifyContent.Center
                            LayoutMinHeight: =100
                            LayoutMinWidth: =250
                            LayoutMode: =LayoutMode.Auto
                            RadiusBottomLeft: =4
                            RadiusBottomRight: =4
                            RadiusTopLeft: =4
                            RadiusTopRight: =4
                            Width: =100
                            ZIndex: =3

                            ButtonCanvas9_4 As Button:
                                DisplayMode: =DisplayMode.Edit
                                FillPortions: =1
                                FontSize: =60
                                Height: =32
                                Icon: ="ChevronUp"
                                Layout: ='ButtonCanvas.Layout'.IconOnly
                                LayoutMinHeight: =32
                                LayoutMinWidth: =96
                                OnSelect: =
                                Width: =96
                                X: =0
                                Y: =0
                                ZIndex: =1

                            ButtonCanvas9_5 As Button:
                                DisplayMode: =DisplayMode.Edit
                                FillPortions: =1
                                FontSize: =60
                                Height: =32
                                Icon: ="ChevronDown"
                                Layout: ='ButtonCanvas.Layout'.IconOnly
                                LayoutMinHeight: =32
                                LayoutMinWidth: =96
                                Width: =96
                                X: =0
                                Y: =0
                                ZIndex: =2

                hrz_ModalFooter As groupContainer.horizontalAutoLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    DropShadow: =DropShadow.Light
                    FillPortions: =0
                    Height: =70
                    LayoutAlignItems: =LayoutAlignItems.Center
                    LayoutGap: =10
                    LayoutJustifyContent: =LayoutJustifyContent.End
                    LayoutMinHeight: =40
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    PaddingLeft: =10
                    PaddingRight: =10
                    ZIndex: =3

                    btn_ModalSave As Button:
                        Align: =Align.Justify
                        BasePaletteColor: =
                        DisplayMode: =DisplayMode.Edit
                        Height: =32
                        Icon: ="Save"
                        Layout: ='ButtonCanvas.Layout'.IconAfter
                        LayoutMinHeight: =32
                        LayoutMinWidth: =96
                        OnSelect: |
                            =Patch(
                                colLines,
                                LookUp(
                                    colLines,
                                    'Line_No.' = com_Modal.LineId
                                ),
                                {Qty_Phys_Inventory: QuantityCompleted}
                            );
                            Reset(inp_rezQty_2);
                            Reset(inp_potrebnoQty_2);
                            Set(
                                isModalOpen,
                                false
                            );
                        Text: ="Spasi"
                        Width: =96
                        X: =0
                        Y: =0
                        ZIndex: =2

